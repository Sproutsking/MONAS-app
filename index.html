<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <title>MonApe - Enhanced Platform</title>
    <style>
        :root {
            --primary: #8B5CF6;
            --secondary: #7C3AED;
            --accent: #EC4899;
            --accent-red: #EF4444;
            --success: #22C55E;
            --bg-primary: #000000;
            --bg-secondary: #0a0a0a;
            --text-primary: #FFFFFF;
            --text-secondary: #A0AEC0;
            --border: #8B5CF6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
        }
         ::-webkit-scrollbar {
            display: none;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                repeating-linear-gradient(45deg, transparent, transparent 40px, rgba(139, 92, 246, 0.03) 40px, rgba(139, 92, 246, 0.03) 80px),
                repeating-linear-gradient(-45deg, transparent, transparent 40px, rgba(236, 72, 153, 0.03) 40px, rgba(236, 72, 153, 0.03) 80px),
                radial-gradient(circle at 20% 50%, rgba(139, 92, 246, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 50%, rgba(236, 72, 153, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
            position: relative;
            z-index: 1;
            padding: 0 0 4% 0;
            overflow: hidden;
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background: var(--bg-secondary);
            padding: 20px 16px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            border-right: 2px solid var(--border);
            border-left: 2px solid var(--border);
            z-index: 100;
            transition: transform 0.3s ease;
            left: 4%;
            box-shadow: 4px 0 24px rgba(139, 92, 246, 0.1);
        }
       
        .sidebar::-webkit-scrollbar { width: 4px; }
        .sidebar::-webkit-scrollbar-track { background: transparent; }
        .sidebar::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
       
        .logo {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 32px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-align: center;
        }
       
        .nav-item {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            margin-bottom: 8px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            font-weight: 600;
            font-size: 14px;
            background: rgba(173, 127, 173, 0.048);
            border: 1px solid rgba(168, 136, 168, 0.089);
        }
       
        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }
       
        .nav-item:hover {
            background: rgba(139, 92, 246, 0.1);
            transform: translateX(4px);
        }
       
        .nav-item.active {
            background: linear-gradient(90deg, rgba(139, 92, 246, 0.15), rgba(236, 72, 153, 0.1));
            border: 1px solid rgba(139, 92, 246, 0.3);
        }
       
        .nav-item.active::before {
            transform: scaleY(1);
        }
       
        .nav-icon {
            margin-right: 16px;
            font-size: 22px;
            transition: transform 0.3s ease;
        }
       
        .nav-item.active .nav-icon {
            transform: scale(1.1);
            color: var(--primary);
        }
       
        .social-buttons {
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
        }
       
        .social-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
       
        .social-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
       
        .social-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px;
            border-radius: 10px;
            background: rgba(139, 92, 246, 0.05);
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 22px;
        }
       
        .social-btn:hover {
            background: rgba(139, 92, 246, 0.15);
            border-color: var(--primary);
            transform: translateY(-2px);
        }
       
        .social-btn.twitter { color: #1DA1F2; }
        .social-btn.discord { color: #5865F2; }
        .social-btn.tiktok { color: #FF0050; }
        .social-btn.telegram { color: #0088CC; }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: calc(250px + 4%);
            padding: 0;
            width: calc(92% - 250px);
            max-width: calc(92% - 250px);
            overflow-x: hidden;
            box-sizing: border-box;
            position: relative;
            border-right: 2px solid var(--border);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 40px;
            background: linear-gradient(135deg, var(--bg-secondary) 0%, #0d0d1a 100%);
            border-bottom: 2px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.4);
        }

        .header-title {
            margin: 0;
            font-size: 32px;
            font-weight: 700;
        }

        .header-actions {
            display: flex;
            gap: 16px;
        }

        .icon-btn {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: var(--text-primary);
            width: 44px;
            height: 44px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
        }

        .icon-btn:hover {
            background: rgba(139, 92, 246, 0.2);
            transform: translateY(-2px);
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--accent-red);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Sub Navigation */
        .sub-nav-container {
            top: 0;
            position: sticky;
            padding: 0px 0px;
            background: linear-gradient(135deg, var(--bg-secondary) 0%, #0d0d1a 100%);
            border-bottom: 2px solid var(--border);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }

        .sub-nav {
            padding: 6px 5%;
            display: none;
            gap: 12px;
            overflow-x: auto;
        }

        .sub-nav.active {
            display: flex;
        }

        .sub-nav-item {
            padding: 4px 28px;
            border-radius: 28px;
            background: transparent;
            border: 2px solid var(--border);
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .sub-nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .sub-nav-item:hover::before {
            left: 100%;
        }

        .sub-nav-item:hover {
            background: rgba(139, 92, 246, 0.15);
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(139, 92, 246, 0.3);
        }

        .sub-nav-item.active {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-color: var(--primary);
            color: white;
            box-shadow: 0 4px 20px rgba(139, 92, 246, 0.5);
        }

        /* Content Area */
        .content {
            padding: 10px 24px;
            width: 100%;
            height: 100%;
            max-width: 100%;
            overflow-x: hidden;
            box-sizing: border-box;
            overflow-y: auto;
        }

        .section-content {
            display: none;
            animation: fadeIn 0.5s ease;
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
            box-sizing: border-box;
        }

        .section-content.active {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 100%;
            margin-bottom: 20px;
            overflow-x: hidden;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Card Styles */
        .card {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, #0d0d1a 100%);
            padding: 32px;
            border-radius: 20px;
            margin-bottom: 24px;
            border: 1px solid var(--border);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at top right, rgba(139, 92, 246, 0.1), transparent 60%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .card:hover::before {
            opacity: 1;
        }

        .card:hover {
            border-color: var(--primary);
            box-shadow: 0 12px 48px rgba(139, 92, 246, 0.3),
                        0 0 60px rgba(139, 92, 246, 0.1) inset;
            transform: translateY(-4px);
        }

        .card > * {
            position: relative;
            z-index: 1;
        }

        .card-title {
            margin: 0 0 20px 0;
            font-size: 24px;
            font-weight: 700;
        }

        /* Create Section Cards */
        .create-type-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .create-type-card {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(236, 72, 153, 0.15));
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .create-type-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 60px rgba(139, 92, 246, 0.3);
            border-color: var(--primary);
        }

        .create-type-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .create-type-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .create-type-desc {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* NFT Creator */
        .nft-creator {
            display: none;
        }

        .nft-creator.active {
            display: block;
        }

        .layer-builder {
            background: var(--bg-primary);
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 24px;
        }

        .layer-preview {
            width: 100%;
            max-width: 400px;
            aspect-ratio: 1;
            background: var(--bg-secondary);
            border: 2px dashed var(--border);
            border-radius: 12px;
            margin: 0 auto 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .layer-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .layer-item {
            background: var(--bg-secondary);
            padding: 16px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid var(--border);
        }

        .layer-controls {
            display: flex;
            gap: 8px;
        }

        .metadata-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
        }

        /* Collection Carousel */
        .collection-carousel {
            position: relative;
            margin-bottom: 32px;
            padding: 0 60px;
            width: 100%;
            max-width: 100%;
            overflow: hidden;
        }

        .collection-scroll {
            display: flex;
            gap: 24px;
            overflow-x: hidden;
            scroll-behavior: smooth;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding: 8px 0;
            width: 100%;
        }

        .collection-scroll::-webkit-scrollbar {
            display: none;
        }

        .collection-card {
            min-width: 320px;
            flex-shrink: 0;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0a2e 100%);
            backdrop-filter: blur(10px);
            padding: 32px;
            border-radius: 20px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .collection-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 0;
        }

        .collection-card:hover::before {
            opacity: 1;
        }

        .collection-card:hover {
            transform: translateY(-12px) scale(1.02);
            border-color: var(--primary);
            box-shadow: 0 24px 64px rgba(139, 92, 246, 0.4),
                        0 0 80px rgba(139, 92, 246, 0.2) inset;
        }

        .collection-card > * {
            position: relative;
            z-index: 1;
        }

        .collection-icon {
            font-size: 64px;
            text-align: center;
            margin-bottom: 20px;
            filter: drop-shadow(0 4px 12px rgba(139, 92, 246, 0.5));
        }

        .collection-name {
            font-size: 22px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #fff, var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .collection-stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(139, 92, 246, 0.3);
        }

        .collection-stat {
            text-align: center;
        }

        .collection-stat-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 6px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .collection-stat-label {
            font-size: 13px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.9), rgba(236, 72, 153, 0.9));
            border: 1px solid rgba(139, 92, 246, 0.5);
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.3s ease;
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.4);
        }

        .carousel-nav:hover {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            transform: translateY(-50%) scale(1.15);
            box-shadow: 0 12px 32px rgba(139, 92, 246, 0.6);
        }

        .carousel-nav:active {
            transform: translateY(-50%) scale(0.95);
        }

        .carousel-nav.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
        }

        .carousel-nav.left {
            left: 0;
        }

        .carousel-nav.right {
            right: 0;
        }

        /* NFT Grid */
        .nft-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        /* NFT Card Enhanced */
        .nft-card {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, #0d0d1a 100%);
            border-radius: 20px;
            overflow: hidden;
            border: 2px solid var(--border);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
        }

        .nft-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(139, 92, 246, 0.15), transparent 70%);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .nft-card:hover::before {
            opacity: 1;
        }

        .nft-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary);
            box-shadow: 0 16px 48px rgba(139, 92, 246, 0.35),
                        0 0 80px rgba(139, 92, 246, 0.15) inset;
        }

        .nft-image {
            height: 280px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));
            position: relative;
        }

        .rarity-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            color: white;
            backdrop-filter: blur(10px);
            text-transform: uppercase;
        }

        .rarity-common { background: rgba(156, 163, 175, 0.9); }
        .rarity-rare { background: rgba(59, 130, 246, 0.9); }
        .rarity-epic { background: rgba(139, 92, 246, 0.9); }
        .rarity-legendary { background: rgba(245, 158, 11, 0.9); }
        .rarity-mythic { background: rgba(239, 68, 68, 0.9); }

        .nft-info {
            padding: 20px;
        }

        .nft-name {
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 8px;
        }

        .nft-price {
            color: var(--text-secondary);
            margin-bottom: 16px;
            font-size: 16px;
        }

        .nft-actions {
            display: flex;
            gap: 8px;
        }

        .wishlist-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--accent);
            transition: all 0.3s ease;
        }

        .wishlist-btn:hover {
            background: rgba(236, 72, 153, 0.1);
            border-color: var(--accent);
        }

        .wishlist-btn.active {
            background: var(--accent);
            color: white;
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #7C3AED, var(--primary));
            transform: translateY(-3px);
            box-shadow: 0 12px 28px rgba(139, 92, 246, 0.5);
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: rgba(139, 92, 246, 0.1);
            border-color: var(--primary);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 12px;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 16px;
            background: rgba(139, 92, 246, 0.05);
            border: 2px solid var(--border);
            border-radius: 14px;
            color: var(--text-primary);
            font-size: 14px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(139, 92, 246, 0.12);
            box-shadow: 0 0 0 4px rgba(139, 92, 246, 0.1);
            transform: translateY(-2px);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.85);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(10px);
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal {
            background: var(--bg-secondary);
            padding: 32px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(139, 92, 246, 0.3);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-title {
            margin: 0;
            font-size: 24px;
            font-weight: 700;
        }

        .close-btn {
            background: rgba(239, 68, 68, 0.1);
            border: none;
            color: var(--accent-red);
            font-size: 24px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            transform: rotate(90deg);
        }

        /* Wallet Hero */
        .wallet-hero {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 32px;
            border-radius: 20px;
            margin-bottom: 28px;
            text-align: center;
            color: white;
        }

        .wallet-balance {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 12px;
        }

        .wallet-address-badge {
            background: rgba(255,255,255,0.2);
            padding: 8px 20px;
            border-radius: 24px;
            font-size: 14px;
            display: inline-block;
        }

        /* Profile */
        .profile-hero {
            display: flex;
            align-items: center;
            gap: 24px;
            margin-bottom: 32px;
        }

        .profile-avatar {
            font-size: 80px;
            position: relative;
        }

        .profile-info {
            flex: 1;
        }

        .profile-name {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .profile-username {
            color: var(--text-secondary);
            font-size: 18px;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .profile-stat {
            text-align: center;
            padding: 20px;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 12px;
        }

        .profile-stat-value {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .profile-stat-label {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .profile-field { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            padding: 12px; 
            border: 1px solid var(--border); 
            border-radius: 8px; 
            margin-bottom: 8px; 
        }
        
        .profile-field-label { 
            color: var(--text-secondary); 
        }

        /* Asset Dashboard */
        .asset-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .asset-card {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));
            backdrop-filter: blur(10px);
            padding: 32px;
            border-radius: 20px;
            text-align: center;
            border: 1px solid rgba(139, 92, 246, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .asset-card:hover {
            transform: translateY(-8px);
            border-color: rgba(139, 92, 246, 0.5);
            box-shadow: 0 20px 60px rgba(139, 92, 246, 0.3);
        }

        .asset-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .asset-value {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 8px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .asset-label {
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
        }

        /* Settings */
        .settings-section {
            margin-bottom: 32px;
        }

        .settings-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: rgba(139, 92, 246, 0.05);
            border-radius: 12px;
            margin-bottom: 12px;
            border: 1px solid var(--border);
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 24px;
            background: var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: var(--primary);
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.2s;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(26px);
        }

        /* Transfer Wallets */
        .transfer-wallets {
            display: flex;
            gap: 16px;
            overflow-x: auto;
            padding: 4px;
            margin-bottom: 24px;
        }

        .transfer-wallet {
            width: 200px;
            padding: 20px;
            background: rgba(139, 92, 246, 0.1);
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .transfer-wallet:hover,
        .transfer-wallet.active {
            border-color: var(--primary);
            background: linear-gradient(136deg, black, purple, black);
        }

        .transfer-wallet-name {
            font-weight: 700;
            margin-bottom: 8px;
        }

        .transfer-wallet-balance {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Bottom Navigation */
        .bottom-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            border-radius: 16px 16px 0 0;
            background: var(--bg-secondary);
            justify-content: space-around;
            padding: 10px 2%;
            border-top: 1px solid var(--border);
            z-index: 100;
        }

        .bottom-nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .bottom-nav-item.active {
            color: var(--primary);
            background: rgba(139, 92, 246, 0.1);
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.3);
            border: 1px solid var(--primary);
        }

        .bottom-nav-icon {
            font-size: 24px;
            margin-bottom: 4px;
        }

        .bottom-nav-label {
            font-size: 11px;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            top: 24px;
            right: 24px;
            background: var(--bg-secondary);
            padding: 20px 24px;
            border-radius: 16px;
            border: 1px solid var(--border);
            z-index: 3000;
            animation: slideInRight 0.4s ease;
            box-shadow: 0 12px 40px rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 300px;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .toast.success {
            border-color: var(--success);
        }

        .toast.error {
            border-color: var(--accent-red);
        }

        .toast-icon {
            font-size: 24px;
        }

        /* File Upload */
        .file-upload-area {
            border: 2px dashed var(--border);
            border-radius: 16px;
            padding: 60px 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 24px;
        }

        .file-upload-area:hover {
            border-color: var(--primary);
            background: rgba(139, 92, 246, 0.05);
        }

        .file-upload-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }

        .file-upload-text {
            color: var(--text-secondary);
            font-size: 14px;
            margin-top: 8px;
        }

        /* Asset Tab Content */
        .asset-tab-content {
            display: none;
            width: 100%;
        }

        .asset-tab-content.active {
            display: block;
            animation: fadeIn 0.4s ease;
            width: 100%;
        }

        /* NFT Trading Panel */
        .trade-panel-trigger {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(236, 72, 153, 0.15));
            backdrop-filter: blur(10px);
            padding: 24px;
            border-radius: 16px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .trade-panel-trigger:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(139, 92, 246, 0.3);
            border-color: var(--primary);
        }

        .trade-panel-trigger h3 {
            margin: 0;
            font-size: 20px;
            font-weight: 700;
        }

        .trade-panel-trigger p {
            margin: 4px 0 0 0;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .trade-panel-icon {
            font-size: 36px;
        }

        .trade-panel-content {
            display: none;
            background: var(--bg-primary);
            padding: 24px;
            border-radius: 16px;
            margin-bottom: 24px;
            border: 1px solid var(--border);
            animation: slideDown 0.4s ease;
        }

        .trade-panel-content.active {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .trade-toggle-buttons {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            background: rgba(139, 92, 246, 0.05);
            padding: 6px;
            border-radius: 12px;
        }

        .trade-toggle-btn {
            flex: 1;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            background: transparent;
            color: var(--text-secondary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .trade-toggle-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4);
        }

        .trade-toggle-btn:hover:not(.active) {
            background: rgba(139, 92, 246, 0.1);
            color: var(--text-primary);
        }

        .trade-section {
            display: none;
        }

        .trade-section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .nft-selector-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
            max-height: 300px;
            overflow-y: auto;
            padding: 12px;
            background: var(--bg-secondary);
            border-radius: 12px;
        }

        .nft-selector-card {
            background: var(--bg-primary);
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nft-selector-card:hover {
            border-color: var(--primary);
            transform: scale(1.05);
        }

        .nft-selector-card.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(236, 72, 153, 0.2));
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.4);
        }

        .nft-selector-image {
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));
            position: relative;
        }

        .nft-selector-info {
            padding: 8px;
            text-align: center;
        }

        .nft-selector-name {
            font-size: 12px;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .trade-form {
            background: rgba(139, 92, 246, 0.05);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        .selected-items-display {
            background: var(--bg-secondary);
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 20px;
            min-height: 60px;
        }

        .selected-items-display h4 {
            margin: 0 0 12px 0;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .selected-items-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .selected-item-tag {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background: var(--primary);
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .selected-item-tag button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 14px;
            padding: 0;
            display: flex;
            align-items: center;
        }

        .qr-code-display {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 20px;
        }

        .qr-placeholder {
            width: 200px;
            height: 200px;
            margin: 0 auto;
            background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
        }

        /* Wallet Content Wrapper */
        .wallet-content-wrapper {
            display: flex;
            gap: 32px;
            align-items: start;
        }

        .wallet-main-content {
            flex: 1;
            max-width: 600px;
        }

        .wallet-sidebar {
            width: 350px;
            position: sticky;
            top: 100px;
        }

        .wallet-quick-stats {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0a2e 100%);
            padding: 24px;
            border-radius: 16px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            margin-bottom: 20px;
        }

        .wallet-quick-stats h3 {
            margin: 0 0 16px 0;
            font-size: 16px;
            color: var(--text-secondary);
        }

        .quick-stat-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(139, 92, 246, 0.2);
        }

        .quick-stat-item:last-child {
            border-bottom: none;
        }

        .quick-stat-label {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .quick-stat-value {
            font-weight: 600;
            font-size: 16px;
        }

        .recent-activity {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0a2e 100%);
            padding: 24px;
            border-radius: 16px;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .recent-activity h3 {
            margin: 0 0 16px 0;
            font-size: 16px;
            color: var(--text-secondary);
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: rgba(139, 92, 246, 0.05);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .activity-details {
            flex: 1;
        }

        .activity-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .activity-time {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Collection View */
        .collection-view {
            display: none;
        }

        .collection-view.active {
            display: block;
        }

        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            margin-bottom: 24px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(139, 92, 246, 0.2);
            border-color: var(--primary);
        }

        .policy-card { 
            background: var(--bg-primary); 
            padding: 16px; 
            border-radius: 8px; 
            margin-bottom: 12px; 
            border-left: 4px solid var(--primary); 
        }
        
        .card-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 8px; 
        }
        
        .card-actions { 
            display: flex; 
            gap: 8px; 
        }
        
        .copy-btn, .share-btn { 
            background: none; 
            border: 1px solid var(--border); 
            color: var(--text-secondary); 
            padding: 4px 8px; 
            border-radius: 4px; 
            cursor: pointer; 
            font-size: 12px; 
        }

        /* Search Panel */
        .search-panel {
            padding: 20px;
            background: var(--bg-primary);
            border-radius: 12px;
            margin-bottom: 24px;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        .search-input {
            width: 100%;
            padding: 14px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 14px;
            margin-bottom: 16px;
        }

        .search-filters {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-select {
            padding: 10px 16px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-select:hover {
            border-color: var(--primary);
            background: rgba(139, 92, 246, 0.1);
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(139, 92, 246, 0.15);
        }

        .filter-select option {
            background: var(--bg-secondary);
            color: var(--text-primary);
            padding: 10px;
        }

        .clear-filters-btn {
            padding: 10px 16px;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--accent-red);
            border-radius: 8px;
            color: var(--accent-red);
            cursor: pointer;
            transition: all 0.3s ease;
            display: none;
            font-weight: 600;
            font-size: 12px;
        }

        .clear-filters-btn.active {
            display: inline-block;
        }

        .clear-filters-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            transform: scale(1.05);
        }

        /* Import Section */
        .import-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .import-card {
            padding: 32px;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid var(--border);
            border-radius: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .import-card:hover {
            background: rgba(139, 92, 246, 0.2);
            border-color: var(--primary);
            transform: translateY(-4px);
        }

        .import-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .import-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .import-desc {
            font-size: 14px;
            color: var(--text-secondary);
        }

        /* Order Details */
        .order-card {
            background: rgba(139, 92, 246, 0.05);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 16px;
            transition: all 0.3s ease;
        }

        .order-card:hover {
            border-color: var(--primary);
            background: rgba(139, 92, 246, 0.1);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 16px;
        }

        .order-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .order-status.processing {
            background: rgba(59, 130, 246, 0.2);
            color: #3B82F6;
        }

        .order-status.shipped {
            background: rgba(139, 92, 246, 0.2);
            color: var(--primary);
        }

        .order-status.delivered {
            background: rgba(34, 197, 94, 0.2);
            color: var(--success);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 12px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            transition: width 0.3s ease;
        }

        .order-details-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .order-details-section.active {
            display: block;
        }

        .tracking-timeline {
            margin-top: 24px;
        }

        .tracking-step {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            position: relative;
        }

        .tracking-step:not(:last-child)::after {
            content: '';
            position: absolute;
            left: 19px;
            top: 40px;
            width: 2px;
            height: calc(100% - 20px);
            background: var(--border);
        }

        .tracking-step.completed::after {
            background: var(--primary);
        }

        .tracking-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            background: rgba(139, 92, 246, 0.1);
            border: 2px solid var(--border);
            flex-shrink: 0;
            z-index: 1;
        }

        .tracking-step.completed .tracking-icon {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .tracking-info {
            flex: 1;
            padding-top: 8px;
        }

        .tracking-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .tracking-time {
            color: var(--text-secondary);
            font-size: 13px;
        }

        /* Footer */
        .app-footer {
            background: var(--bg-secondary);
            border-top: 1px solid var(--border);
            padding: 32px 4%;
            margin-top: 60px;
            position: relative;
            z-index: 1;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 32px;
            margin-bottom: 24px;
        }

        .footer-section h4 {
            margin: 0 0 16px 0;
            font-size: 16px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .footer-links {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--primary);
            transform: translateX(4px);
            display: inline-block;
        }

        .footer-bottom {
            padding-top: 24px;
            border-top: 1px solid rgba(139, 92, 246, 0.2);
            text-align: center;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .footer-social {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-bottom: 16px;
        }

        .footer-social a {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary);
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .footer-social a:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.4);
        }

        /* Live Chat */
        .live-chat-panel {
            position: fixed;
            bottom: 80px;
            right: calc(4% + 24px);
            width: 380px;
            height: 500px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
            display: none;
            flex-direction: column;
            z-index: 3000;
            animation: slideUpChat 0.4s ease;
        }

        .live-chat-panel.active {
            display: flex;
        }

        @keyframes slideUpChat {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .chat-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 20px 20px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h3 {
            margin: 0;
            font-size: 18px;
            color: white;
        }

        .chat-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .chat-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: var(--bg-primary);
        }

        .chat-message {
            margin-bottom: 16px;
            display: flex;
            gap: 12px;
        }

        .chat-message.bot {
            justify-content: flex-start;
        }

        .chat-message.user {
            justify-content: flex-end;
        }

        .chat-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .chat-bubble {
            max-width: 70%;
            padding: 12px 16px;
            border-radius: 16px;
            font-size: 14px;
            line-height: 1.5;
        }

        .chat-message.bot .chat-bubble {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 16px 16px 16px 4px;
        }

        .chat-message.user .chat-bubble {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            border-radius: 16px 16px 4px 16px;
        }

        .chat-input-area {
            padding: 16px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border);
            border-radius: 0 0 20px 20px;
        }

        .chat-input-wrapper {
            display: flex;
            gap: 8px;
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 24px;
            color: var(--text-primary);
            font-size: 14px;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .chat-send-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .chat-send-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.4);
        }

        .chat-typing {
            padding: 8px 16px;
            color: var(--text-secondary);
            font-size: 13px;
            font-style: italic;
        }
        /* Overlay Panel */
        .overlay-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 380px;
            height: 100vh;
            background: var(--bg-secondary);
            transition: right 0.3s ease;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            border-left: 1px solid var(--border);
        }

        .overlay-panel.active {
            right: 0;
        }

        .overlay-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px;
            border-bottom: 1px solid var(--border);
        }

        .overlay-content {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
        }
        .overlay-panel.active {
            right: 0;
        }

        .overlay-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px;
            border-bottom: 1px solid var(--border);
        }

        .overlay-content {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
        }

        /* Merch Item Enhancements */
        .merch-item-rating {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .rating-stars {
            display: flex;
            gap: 2px;
            font-size: 14px;
            color: #FFA500;
        }

        .rating-count {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .merch-rarity {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .merch-rarity.limited {
            background: rgba(245, 158, 11, 0.2);
            color: #F59E0B;
            border: 1px solid #F59E0B;
        }

        .merch-rarity.exclusive {
            background: rgba(139, 92, 246, 0.2);
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .merch-rarity.rare {
            background: rgba(236, 72, 153, 0.2);
            color: var(--accent);
            border: 1px solid var(--accent);
        }

        .merch-rarity.common {
            background: rgba(156, 163, 175, 0.2);
            color: #9CA3AF;
            border: 1px solid #9CA3AF;
        }
        
        .pin-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .transaction-summary {
            background: rgba(139, 92, 246, 0.1);
            padding: 24px;
            border-radius: 16px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            margin-bottom: 24px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 16px;
        }
        
        .summary-row:last-child {
            margin-bottom: 0;
            padding-top: 12px;
            border-top: 1px solid var(--border);
            font-weight: bold;
            font-size: 18px;
        }
        
        .summary-label {
            color: var(--text-secondary);
        }
        
        .summary-value {
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.active {
                transform: translateX(0);
            }

            body {
                padding: 0;
            }

            .app-container {
                padding: 0;
            }

            .sidebar {
                border-left: none;
                left: 0;
            }

            .main-content {
                margin-left: 0;
                margin-right: 0;
                width: 100vw;
                max-width: 100vw;
                border-right: none;
            }

            .overlay-panel.active {
                right: 0;
            }

            .content {
                overflow-x: hidden;
                padding: 20px;
            }

            .collection-carousel {
                padding: 0 15px;
                overflow: visible;
            }

            .bottom-nav {
                display: flex;
            }

            .header {
                padding: 20px;
            }

            .content {
                padding: 20px;
                padding-bottom: 80px;
            }

            .nft-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
            }

            .asset-dashboard {
                grid-template-columns: repeat(2, 1fr);
                gap: 16px;
            }

            .profile-hero {
                flex-direction: column;
                text-align: center;
            }

            .transfer-wallets {
                flex-direction: row;
                overflow-x: auto;
            }

            .transfer-wallet {
                flex: 1;
                padding: 10px 4%;
                width: fit-content;
            }

            .wallet-hero {
                padding: 24px 20px;
            }

            .wallet-balance {
                font-size: 32px;
            }

            .card {
                padding: 20px;
            }

            .form-input, .form-select {
                padding: 12px;
            }

            .create-type-cards {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .layer-preview {
                max-width: 100%;
                height: 300px;
            }

            .metadata-form {
                grid-template-columns: 1fr;
            }

            .file-upload-area {
                padding: 40px 20px;
            }

            .import-options {
                grid-template-columns: 1fr;
            }

            .collection-carousel {
                padding: 0 15px;
            }

            .collection-card {
                min-width: 280px;
            }

            .collection-scroll {
                overflow-x: auto;
                gap: 16px;
            }

            .carousel-nav {
                display: none;
            }

            .wallet-content-wrapper {
                flex-direction: column;
            }

            .wallet-main-content {
                max-width: 100%;
            }

            .wallet-sidebar {
                width: 100%;
                position: static;
            }

            .search-panel {
                padding: 16px;
            }

            .search-filters {
                gap: 8px;
            }

            .filter-select {
                font-size: 12px;
                padding: 8px 12px;
                flex: 1;
                min-width: 100px;
            }

            .clear-filters-btn {
                padding: 8px 12px;
                font-size: 11px;
            }

            .carousel-nav.left {
                left: 5px;
            }

            .carousel-nav.right {
                right: 5px;
            }

            .card {
                width: 100%;
            }

            .content {
                width: 100%;
            }

            .modal {
                width: 95%;
                padding: 24px;
            }

            .sub-nav-container {
                padding: 16px 20px;
            }

            .sub-nav {
                gap: 8px;
            }

            .sub-nav-item {
                padding: 8px 16px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="logo">MonApe</div>
            <nav>
                <div class="nav-item active" data-section="create">
                    <i class='bx bxs-brush nav-icon'></i>
                    <span>Create</span>
                </div>
                <div class="nav-item" data-section="enhance">
                    <i class='bx bxs-up-arrow-circle nav-icon'></i>
                    <span>Enhance</span>
                </div>
                <div class="nav-item" data-section="merch">
                    <i class='bx bxs-shopping-bag nav-icon'></i>
                    <span>Merch</span>
                </div>
                <div class="nav-item" data-section="wallet">
                    <i class='bx bxs-wallet nav-icon'></i>
                    <span>Wallet</span>
                </div>
                <div class="nav-item" data-section="account">
                    <i class='bx bxs-user-detail nav-icon'></i>
                    <span>Account</span>
                </div>
            </nav>
           
            <div class="social-buttons">
                <div class="social-label">Connect With Us</div>
                <div class="social-grid">
                    <div class="social-btn twitter" onclick="openSocial('twitter')">
                        <i class='bx bxl-twitter'></i>
                    </div>
                    <div class="social-btn discord" onclick="openSocial('discord')">
                        <i class='bx bxl-discord-alt'></i>
                    </div>
                    <div class="social-btn tiktok" onclick="openSocial('tiktok')">
                        <i class='bx bxl-tiktok'></i>
                    </div>
                    <div class="social-btn telegram" onclick="openSocial('telegram')">
                        <i class='bx bxl-telegram'></i>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h1 class="header-title" id="headerTitle">Create</h1>
                <div class="header-actions">
                    <button class="icon-btn" id="notificationBtn">
                        <i class='bx bx-bell'></i>
                        <span class="notification-badge">3</span>
                    </button>
                    <button class="icon-btn" id="supportBtn">
                        <i class='bx bx-headphone'></i>
                    </button>
                </div>
            </header>

            <!-- Sub Navigation -->
            <div class="sub-nav-container">
                <!-- Create Sub-Nav -->
                <div class="sub-nav active" data-section="create">
                    <div class="sub-nav-item active" data-subsection="market">Market</div>
                    <div class="sub-nav-item" data-subsection="create-main">Create</div>
                    <div class="sub-nav-item" data-subsection="list">List</div>
                </div>

                <!-- Enhance Sub-Nav -->
                <div class="sub-nav" data-section="enhance">
                    <div class="sub-nav-item active" data-subsection="accessories">Accessories</div>
                    <div class="sub-nav-item" data-subsection="upgrade">Upgrade</div>
                    <div class="sub-nav-item" data-subsection="modified">Modified</div>
                </div>

                <!-- Merch Sub-Nav -->
                <div class="sub-nav" data-section="merch">
                    <div class="sub-nav-item active" data-subsection="items">Items</div>
                    <div class="sub-nav-item" data-subsection="cart">Cart</div>
                    <div class="sub-nav-item" data-subsection="wishlist">Wishlist</div>
                    <div class="sub-nav-item" data-subsection="orders">Orders</div>
                </div>

                <!-- Wallet Sub-Nav -->
                <div class="sub-nav" data-section="wallet">
                    <div class="sub-nav-item active" data-subsection="send">Send</div>
                    <div class="sub-nav-item" data-subsection="receive">Receive</div>
                    <div class="sub-nav-item" data-subsection="swap">Swap</div>
                    <div class="sub-nav-item" data-subsection="history">History</div>
                    <div class="sub-nav-item" data-subsection="transfer">Transfer</div>
                </div>

                <!-- Account Sub-Nav -->
                <div class="sub-nav" data-section="account">
                    <div class="sub-nav-item active" data-subsection="profile">Profile</div>
                    <div class="sub-nav-item" data-subsection="settings">Settings</div>
                    <div class="sub-nav-item" data-subsection="privacy">Privacy</div>
                    <div class="sub-nav-item" data-subsection="assets">Assets</div>
                </div>
            </div>

            <!-- Content -->
            <div class="content">
                <!-- Market Section -->
                <div class="section-content active" data-section="create" data-subsection="market">
                    <!-- Search Panel -->
                    <div class="search-panel">
                        <input type="text" class="search-input" id="marketSearch" placeholder="Search NFTs, collections...">
                        <div class="search-filters">
                            <select class="filter-select" id="rarityFilter">
                                <option value="">All Rarities</option>
                                <option value="common">Common</option>
                                <option value="rare">Rare</option>
                                <option value="epic">Epic</option>
                                <option value="legendary">Legendary</option>
                                <option value="mythic">Mythic</option>
                            </select>
                            <select class="filter-select" id="priceFilter">
                                <option value="">All Prices</option>
                                <option value="0-5">Under 5 MON</option>
                                <option value="5-10">5-10 MON</option>
                                <option value="10+">Over 10 MON</option>
                            </select>
                            <select class="filter-select" id="typeFilter">
                                <option value="">All Types</option>
                                <option value="nfts">NFTs</option>
                                <option value="modified-nfts">Modified NFTs</option>
                            </select>
                            <button class="clear-filters-btn" id="clearFilters"> Clear</button>
                        </div>
                    </div>

                    <!-- Collections Carousel -->
                    <div class="card">
                        <h2 class="card-title">Collections</h2>
                        <div class="collection-carousel">
                            <button class="carousel-nav left" id="carouselLeft"></button>
                            <div class="collection-scroll" id="collectionScroll"></div>
                            <button class="carousel-nav right" id="carouselRight"></button>
                        </div>
                    </div>

                    <!-- NFT Grid -->
                    <div class="card">
                        <h2 class="card-title">NFTs</h2>
                        <div class="nft-grid" id="nftMarket"></div>
                    </div>
                </div>

                <!-- Collection View (Sub-section of Market) -->
                <div class="collection-view" id="collectionView">
                    <button class="back-btn" id="backToMarket">
                        <i class='bx bx-arrow-back'></i>
                        Back to Market
                    </button>
                    <div class="card">
                        <h2 class="card-title" id="collectionViewTitle">Collection Name</h2>
                        <div class="nft-grid" id="collectionNFTs"></div>
                    </div>
                </div>

                <!-- Create Main Section -->
                <div class="section-content" data-section="create" data-subsection="create-main">
                    <div class="create-type-cards" id="createTypeCards">
                        <div class="create-type-card" data-type="nft">
                            <div class="create-type-icon"></div>
                            <div class="create-type-title">Create NFT</div>
                            <div class="create-type-desc">Design your unique NFT with layers and metadata</div>
                        </div>
                        <div class="create-type-card" data-type="collection">
                            <div class="create-type-icon"></div>
                            <div class="create-type-title">Create Collection</div>
                            <div class="create-type-desc">Launch your own NFT collection</div>
                        </div>
                    </div>

                    <!-- NFT Creator -->
                    <div class="nft-creator" id="nftCreator">
                        <button class="back-btn" id="backToCreateMain">
                            <i class='bx bx-arrow-back'></i>
                            Back
                        </button>
                        <div class="card">
                            <h2 class="card-title">NFT Layer Builder</h2>
                            <div class="layer-builder">
                                <div class="layer-preview" id="layerPreview">
                                    <span style="color: var(--text-secondary);">Layer preview</span>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Add Layer</label>
                                    <input type="file" class="form-input" id="layerUpload" accept="image/*">
                                </div>
                                <div class="layer-list" id="layerList"></div>
                            </div>
                        </div>

                        <div class="card">
                            <h2 class="card-title">NFT Metadata</h2>
                            <div class="metadata-form">
                                <div class="form-group">
                                    <label class="form-label">Name *</label>
                                    <input type="text" class="form-input" id="nftName" placeholder="My NFT">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Description</label>
                                    <input type="text" class="form-input" id="nftDescription" placeholder="Description">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Rarity</label>
                                    <select class="form-select" id="nftRarity">
                                        <option value="common">Common</option>
                                        <option value="rare">Rare</option>
                                        <option value="epic">Epic</option>
                                        <option value="legendary">Legendary</option>
                                        <option value="mythic">Mythic</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Collection (Optional)</label>
                                    <select class="form-select" id="nftCollection">
                                        <option value="">None</option>
                                    </select>
                                </div>
                            </div>
                            <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="createNFT()">Create NFT</button>
                        </div>
                    </div>

                    <!-- Collection Creator -->
                    <div class="nft-creator" id="collectionCreator">
                        <button class="back-btn" id="backToCreateMainCol">
                            <i class='bx bx-arrow-back'></i>
                            Back
                        </button>
                        <div class="card">
                            <h2 class="card-title">Collection Details</h2>
                            <div class="file-upload-area" id="collectionBannerUpload">
                                <div class="file-upload-icon"></div>
                                <p>Upload Collection Banner</p>
                                <p class="file-upload-text">Recommended: 1400x400px</p>
                            </div>
                            <div class="metadata-form">
                                <div class="form-group">
                                    <label class="form-label">Collection Name *</label>
                                    <input type="text" class="form-input" id="collectionName" placeholder="My Collection">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Symbol *</label>
                                    <input type="text" class="form-input" id="collectionSymbol" placeholder="MYCOL">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Description</label>
                                    <input type="text" class="form-input" id="collectionDescription" placeholder="Collection description">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Total Supply</label>
                                    <input type="number" class="form-input" id="collectionSupply" placeholder="10000">
                                </div>
                            </div>
                            <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="createCollection()">Create Collection</button>
                        </div>
                    </div>
                </div>

                <!-- List Section -->
                <div class="section-content" data-section="create" data-subsection="list">
                    <div class="card">
                        <h2 class="card-title">List Item for Sale</h2>
                        <div class="import-options" style="margin-bottom: 32px;">
                            <div class="import-card" onclick="openAssetSelector('list')">
                                <div class="import-icon"></div>
                                <div class="import-title">From Assets</div>
                                <div class="import-desc">Select from your NFTs or Collections</div>
                            </div>
                            <div class="import-card" onclick="openImportModal()">
                                <div class="import-icon"></div>
                                <div class="import-title">Import NFT</div>
                                <div class="import-desc">Import from external wallet</div>
                            </div>
                            <div class="import-card" onclick="openCollectionUpload()">
                                <div class="import-icon"></div>
                                <div class="import-title">Upload Collection</div>
                                <div class="import-desc">Upload complete NFT collection file</div>
                            </div>
                        </div>

                        <div id="listingForm" style="display: none;">
                            <div class="form-group">
                                <label class="form-label">Selected Item</label>
                                <input type="text" class="form-input" id="listItemName" readonly>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Price (MON)</label>
                                <input type="number" class="form-input" id="listPrice" placeholder="0.00">
                            </div>
                            <button class="btn btn-primary" onclick="listItem()">List for Sale</button>
                        </div>
                    </div>
                </div>

                <!-- Accessories Section -->
                <div class="section-content" data-section="enhance" data-subsection="accessories">
                    <div class="nft-grid" id="accessoriesShop"></div>
                </div>

                <!-- Upgrade Section -->
                <div class="section-content" data-section="enhance" data-subsection="upgrade">
                    <div class="card">
                        <h2 class="card-title">Upgrade NFT</h2>
                        <div class="import-options" style="margin-bottom: 32px;">
                            <div class="import-card" onclick="openAssetSelector('nft')">
                                <div class="import-icon"></div>
                                <div class="import-title">Select NFT</div>
                                <div class="import-desc">Choose NFT to upgrade</div>
                            </div>
                            <div class="import-card" onclick="openAssetSelector('accessory')">
                                <div class="import-icon"></div>
                                <div class="import-title">Select Accessory</div>
                                <div class="import-desc">Choose accessory to apply</div>
                            </div>
                        </div>
                        <div id="upgradeForm" style="display: none;">
                            <div class="form-group">
                                <label class="form-label">NFT</label>
                                <input type="text" class="form-input" id="upgradeNFT" readonly>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Accessory</label>
                                <input type="text" class="form-input" id="upgradeAccessory" readonly>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Upgrade Cost</label>
                                <input type="text" class="form-input" value="1.5 MON" readonly>
                            </div>
                            <button class="btn btn-primary" onclick="upgradeNFT()">Upgrade NFT</button>
                        </div>
                    </div>
                </div>

                <!-- Modified NFTs Section -->
                <div class="section-content" data-section="enhance" data-subsection="modified">
                    <div class="card">
                        <h2 class="card-title">Modified NFTs</h2>
                        <div class="nft-grid" id="modifiedNFTs"></div>
                    </div>
                </div>

                <!-- Merch Items Section -->
                <div class="section-content" data-section="merch" data-subsection="items">
                    <div class="nft-grid" id="merchItems"></div>
                </div>

                <!-- Cart Section -->
                <div class="section-content" data-section="merch" data-subsection="cart">
                    <div class="card">
                        <h2 class="card-title">Shopping Cart</h2>
                        <div id="cartItems"></div>
                        <div style="text-align: center; font-size: 24px; font-weight: bold; margin-top: 20px;" id="cartTotal">Total: $0.00</div>
                        <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="proceedToCheckout()">Checkout</button>
                    </div>
                </div>

                <!-- Wishlist Section -->
                <div class="section-content" data-section="merch" data-subsection="wishlist">
                    <div class="card">
                        <h2 class="card-title">Wishlist</h2>
                        <div class="nft-grid" id="wishlistItems"></div>
                    </div>
                </div>

                <!-- Orders Section -->
                <div class="section-content" data-section="merch" data-subsection="orders">
                    <div class="card" id="ordersList">
                        <h2 class="card-title">My Orders</h2>
                        <div id="ordersContainer"></div>
                    </div>
                    
                    <!-- Order Details View -->
                    <div class="card order-details-section" id="orderDetailsView">
                        <button class="back-btn" onclick="closeOrderDetails()">
                            <i class='bx bx-arrow-back'></i>
                            Back to Orders
                        </button>
                        <div id="orderDetailsContent"></div>
                    </div>
                </div>

                <!-- Wallet Send Section -->
                <div class="section-content" data-section="wallet" data-subsection="send">
                    <div class="wallet-hero">
                        <div class="wallet-balance">1,250.50 MON</div>
                        <div class="wallet-address-badge">0x742d...f0bEb</div>
                    </div>
                    
                    <div class="wallet-content-wrapper">
                        <div class="wallet-main-content">
                            <div class="card">
                                <h2 class="card-title">Send Tokens</h2>
                                <div class="form-group">
                                    <label class="form-label">Token</label>
                                    <select class="form-select">
                                        <option>MON</option>
                                        <option>MONAPE</option>
                                        <option>USDT</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Recipient Address</label>
                                    <input type="text" class="form-input" placeholder="0x...">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Amount</label>
                                    <input type="number" class="form-input" placeholder="0.00">
                                </div>
                                <button class="btn btn-primary" style="width: 100%;" onclick="sendTransaction()">Send</button>
                            </div>
                        </div>
                        
                        <div class="wallet-sidebar">
                            <div class="wallet-quick-stats">
                                <h3>Quick Stats</h3>
                                <div class="quick-stat-item">
                                    <span class="quick-stat-label">Total Balance</span>
                                    <span class="quick-stat-value">1,250.50 MON</span>
                                </div>
                                <div class="quick-stat-item">
                                    <span class="quick-stat-label">Available</span>
                                    <span class="quick-stat-value">1,248.50 MON</span>
                                </div>
                                <div class="quick-stat-item">
                                    <span class="quick-stat-label">Pending</span>
                                    <span class="quick-stat-value">2.00 MON</span>
                                </div>
                            </div>
                            
                            <div class="recent-activity">
                                <h3>Recent Activity</h3>
                                <div class="activity-item">
                                    <div class="activity-icon"></div>
                                    <div class="activity-details">
                                        <div class="activity-title">Sent 25 MON</div>
                                        <div class="activity-time">2 hours ago</div>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon"></div>
                                    <div class="activity-details">
                                        <div class="activity-title">Received 50 MON</div>
                                        <div class="activity-time">5 hours ago</div>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon"></div>
                                    <div class="activity-details">
                                        <div class="activity-title">Swapped Tokens</div>
                                        <div class="activity-time">1 day ago</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Wallet Receive Section -->
                <div class="section-content" data-section="wallet" data-subsection="receive">
                    <div class="wallet-hero">
                        <div class="wallet-balance">1,250.50 MON</div>
                        <div class="wallet-address-badge">0x742d...f0bEb</div>
                    </div>
                    
                    <div class="wallet-content-wrapper">
                        <div class="wallet-main-content">
                            <div class="card">
                                <h2 class="card-title">Receive Tokens</h2>
                                <div style="text-align: center; padding: 40px;">
                                    <div style="font-size: 100px; margin-bottom: 20px;"></div>
                                    <h3 style="margin-bottom: 20px;">Your Wallet Address</h3>
                                    <div style="background: rgba(139, 92, 246, 0.1); padding: 20px; border-radius: 12px; margin-bottom: 20px; font-size: 18px; word-break: break-all;">
                                        0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb
                                    </div>
                                    <button class="btn btn-primary" onclick="copyToClipboard('0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb')">Copy Address</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="wallet-sidebar">
                            <div class="wallet-quick-stats">
                                <h3>Receive Info</h3>
                                <div class="quick-stat-item">
                                    <span class="quick-stat-label">Network</span>
                                    <span class="quick-stat-value">Monad</span>
                                </div>
                                <div class="quick-stat-item">
                                    <span class="quick-stat-label">Confirmations</span>
                                    <span class="quick-stat-value">12 blocks</span>
                                </div>
                                <div class="quick-stat-item">
                                    <span class="quick-stat-label">Est. Time</span>
                                    <span class="quick-stat-value">~2 mins</span>
                                </div>
                            </div>
                            
                            <div class="recent-activity">
                                <h3>Recent Deposits</h3>
                                <div class="activity-item">
                                    <div class="activity-icon"></div>
                                    <div class="activity-details">
                                        <div class="activity-title">Received 50 MON</div>
                                        <div class="activity-time">5 hours ago</div>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon"></div>
                                    <div class="activity-details">
                                        <div class="activity-title">Received 100 USDT</div>
                                        <div class="activity-time">2 days ago</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="app-footer">
                        <div class="footer-content">
                            <div class="footer-section">
                                <h4>MonApe</h4>
                                <ul class="footer-links">
                                    <li><a href="#">About Us</a></li>
                                    <li><a href="#">Careers</a></li>
                                    <li><a href="#">Blog</a></li>
                                </ul>
                            </div>
                            <div class="footer-section">
                                <h4>Support</h4>
                                <ul class="footer-links">
                                    <li><a href="#">Help Center</a></li>
                                    <li><a href="#">Contact</a></li>
                                    <li><a href="#">FAQ</a></li>
                                </ul>
                            </div>
                            <div class="footer-section">
                                <h4>Legal</h4>
                                <ul class="footer-links">
                                    <li><a href="#">Privacy Policy</a></li>
                                    <li><a href="#">Terms of Service</a></li>
                                    <li><a href="#">Cookie Policy</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="footer-social">
                            <a href="#"><i class='bx bxl-twitter'></i></a>
                            <a href="#"><i class='bx bxl-discord-alt'></i></a>
                            <a href="#"><i class='bx bxl-telegram'></i></a>
                            <a href="#"><i class='bx bxl-instagram'></i></a>
                        </div>
                        <div class="footer-bottom">
                             2025 MonApe. All rights reserved.
                        </div>
                    </div>
                </div>

                <!-- Wallet Swap Section -->
                <div class="section-content" data-section="wallet" data-subsection="swap">
                    <div class="wallet-hero">
                        <div class="wallet-balance">1,250.50 MON</div>
                        <div class="wallet-address-badge">0x742d...f0bEb</div>
                    </div>
                    <div class="card">
                        <h2 class="card-title">Swap Tokens</h2>
                        <div class="form-group">
                            <label class="form-label">From</label>
                            <select class="form-select">
                                <option>MON</option>
                                <option>MONAPE</option>
                                <option>USDT</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Amount</label>
                            <input type="number" class="form-input" placeholder="0.00">
                        </div>
                        <div style="text-align: center; font-size: 32px; margin: 20px 0;"></div>
                        <div class="form-group">
                            <label class="form-label">To</label>
                            <select class="form-select">
                                <option>USDT</option>
                                <option>MON</option>
                                <option>MONAPE</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" style="width: 100%;" onclick="swapTokens()">Swap</button>
                    </div>
                </div>

                <!-- Wallet History Section -->
                <div class="section-content" data-section="wallet" data-subsection="history">
                    <div class="wallet-hero">
                        <div class="wallet-balance">1,250.50 MON</div>
                        <div class="wallet-address-badge">0x742d...f0bEb</div>
                    </div>
                    <div class="card">
                        <h2 class="card-title">Transaction History</h2>
                        <div id="transactionHistory"></div>
                    </div>
                </div>

                <!-- Wallet Transfer Section -->
                <div class="section-content" data-section="wallet" data-subsection="transfer">
                    <div class="wallet-hero">
                        <div class="wallet-balance">1,250.50 MON</div>
                        <div class="wallet-address-badge">0x742d...f0bEb</div>
                    </div>
                    <div class="card">
                        <h2 class="card-title">Import from Connected Wallets</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 24px;">Transfer funds from external wallets to your MonApe wallet</p>
                        
                        <div class="transfer-wallets">
                            <div class="transfer-wallet active">
                                <div class="transfer-wallet-name">MetaMask</div>
                                <div class="transfer-wallet-balance">1,500 MON</div>
                            </div>
                            <div class="transfer-wallet">
                                <div class="transfer-wallet-name">Phantom</div>
                                <div class="transfer-wallet-balance">800 SOL</div>
                            </div>
                            <div class="transfer-wallet">
                                <div class="transfer-wallet-name">Coinbase</div>
                                <div class="transfer-wallet-balance">2,000 USDT</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Asset</label>
                            <select class="form-select">
                                <option>MON</option>
                                <option>ETH</option>
                                <option>USDT</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Amount</label>
                            <input type="number" class="form-input" placeholder="0.00">
                        </div>
                        <button class="btn btn-primary" style="width: 100%;" onclick="importFunds()">Import Funds</button>
                    </div>
                </div>

                <!-- Account Profile Section -->
                <div class="section-content" data-section="account" data-subsection="profile">
                    <div class="card">
                        <div class="profile-hero">
                            <div class="profile-avatar"></div>
                            <div class="profile-info">
                                <div class="profile-name">MonApe User</div>
                                <div class="profile-username">@user123</div>
                            </div>
                        </div>

                        <div class="profile-stats">
                            <div class="profile-stat">
                                <div class="profile-stat-value">12</div>
                                <div class="profile-stat-label">NFTs</div>
                            </div>
                            <div class="profile-stat">
                                <div class="profile-stat-value">3</div>
                                <div class="profile-stat-label">Collections</div>
                            </div>
                            <div class="profile-stat">
                                <div class="profile-stat-value">8</div>
                                <div class="profile-stat-label">Modified</div>
                            </div>
                            <div class="profile-stat">
                                <div class="profile-stat-value">$2,847</div>
                                <div class="profile-stat-label">Portfolio</div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Display Name</label>
                            <input type="text" class="form-input" value="MonApe User">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Username</label>
                            <input type="text" class="form-input" value="@user123">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-input" value="user@monape.io">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Bio</label>
                            <input type="text" class="form-input" value="NFT enthusiast and creator">
                        </div>
                        <button class="btn btn-primary" onclick="saveProfile()">Save Changes</button>
                    </div>
                </div>

                <!-- Account Settings Section -->
                <div class="section-content" data-section="account" data-subsection="settings">
                    <div class="card">
                        <h2 class="card-title">Settings</h2>
                        
                        <div class="settings-section">
                            <div class="settings-title">Security</div>
                            <div class="setting-item">
                                <div>
                                    <h4>Two-Factor Authentication</h4>
                                    <p style="color: var(--text-secondary); font-size: 14px;">Extra security layer</p>
                                </div>
                                <div class="toggle-switch" onclick="toggleSetting(this)">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>
                            <div class="setting-item">
                                <div>
                                    <h4>Biometric Login</h4>
                                    <p style="color: var(--text-secondary); font-size: 14px;">Use fingerprint/face ID</p>
                                </div>
                                <div class="toggle-switch active" onclick="toggleSetting(this)">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>
                            <div class="setting-item">
                                <div>
                                    <h4>Change Password</h4>
                                    <p style="color: var(--text-secondary); font-size: 14px;">Update your password</p>
                                </div>
                                <button class="btn btn-secondary btn-small">Change</button>
                            </div>
                        </div>

                        <div class="settings-section">
                            <div class="settings-title">Privacy</div>
                            <div class="setting-item">
                                <div>
                                    <h4>Profile Visibility</h4>
                                    <p style="color: var(--text-secondary); font-size: 14px;">Who can see your NFTs</p>
                                </div>
                                <select class="form-select" style="width: 120px;">
                                    <option>Public</option>
                                    <option>Private</option>
                                </select>
                            </div>
                            <div class="setting-item">
                                <div>
                                    <h4>Data Export</h4>
                                    <p style="color: var(--text-secondary); font-size: 14px;">Download your data</p>
                                </div>
                                <button class="btn btn-secondary btn-small">Export</button>
                            </div>
                        </div>

                        <div class="settings-section">
                            <div class="settings-title">Notifications</div>
                            <div class="setting-item">
                                <div>
                                    <h4>Email Alerts</h4>
                                    <p style="color: var(--text-secondary); font-size: 14px;">Transaction notifications</p>
                                </div>
                                <div class="toggle-switch active" onclick="toggleSetting(this)">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>
                            <div class="setting-item">
                                <div>
                                    <h4>Push Notifications</h4>
                                    <p style="color: var(--text-secondary); font-size: 14px;">App push alerts</p>
                                </div>
                                <div class="toggle-switch" onclick="toggleSetting(this)">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>
                        </div>

                        <div class="settings-section">
                            <div class="settings-title">Connected Wallets</div>
                            <div class="setting-item">
                                <div>
                                    <h4>MetaMask</h4>
                                    <p style="color: var(--text-secondary); font-size: 14px;">0x742d...f0bEb</p>
                                </div>
                                <button class="btn btn-secondary btn-small">Disconnect</button>
                            </div>
                            <div class="setting-item">
                                <div>
                                    <h4>Connect New Wallet</h4>
                                    <p style="color: var(--text-secondary); font-size: 14px;">Add external wallet</p>
                                </div>
                                <button class="btn btn-primary btn-small">Connect</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Privacy Section -->
                <div class="section-content" data-section="account" data-subsection="privacy">
                    <div class="card">
                        <h2 class="card-title">Privacy & Policy</h2>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>Data Collection</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p>MonApe collects minimal data necessary to provide our services. We collect wallet addresses, transaction history, and profile information you choose to provide. Your private keys are never stored on our servers.</p>
                        </div>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>NFT Minting & Trading</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p>All NFT transactions are recorded on the blockchain and are publicly visible. When you mint or trade NFTs, your wallet address will be associated with these transactions. Ensure you understand the permanence of blockchain transactions before proceeding.</p>
                        </div>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>Wallet Security</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p>You are solely responsible for maintaining the security of your wallet credentials. MonApe cannot recover lost passwords or private keys. Always enable two-factor authentication and never share your credentials with anyone.</p>
                        </div>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>Transaction Safety</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p>Always verify recipient addresses before sending tokens. Blockchain transactions are irreversible. We recommend starting with small test transactions when sending to new addresses. Enable transaction confirmation in settings for additional security.</p>
                        </div>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>Marketplace Safety</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p>When buying or selling NFTs on MonApe marketplace, verify the authenticity of items before purchase. Check collection verification badges and seller reputation. Report suspicious listings to our support team immediately.</p>
                        </div>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>Create & List Safety</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p>Ensure you own the rights to all content you mint as NFTs. Do not upload copyrighted material without permission. MonApe reserves the right to remove content that violates intellectual property rights. Creators are responsible for all listed content.</p>
                        </div>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>Enhancement & Modification</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p>NFT modifications and enhancements are permanent and cannot be undone. When applying accessories or upgrades to your NFTs, carefully review changes before confirming. Modified NFTs may have different market values than originals.</p>
                        </div>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>Merchandise Orders</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p>Physical merchandise orders are processed separately from digital assets. Shipping times vary by location. Customs fees may apply for international orders. Review your order carefully before checkout as cancellations may not be possible once processing begins.</p>
                        </div>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>Wallet & Transfers</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p>When transferring funds between wallets, double-check addresses and amounts. Gas fees apply to all blockchain transactions. Transfer times depend on network congestion. MonApe cannot reverse completed transactions or recover funds sent to wrong addresses.</p>
                        </div>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>Account Security</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p>Protect your account with strong passwords and two-factor authentication. Never share your login credentials. Log out from shared devices. Report suspicious activity immediately. MonApe staff will never ask for your password or private keys.</p>
                        </div>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>Disclaimer</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p>MonApe is provided "as is" without warranties. Cryptocurrency and NFT markets are volatile and risky. Never invest more than you can afford to lose. The platform is not responsible for market losses, failed transactions due to network issues, or losses resulting from user error. By using MonApe, you accept these risks and agree to use the platform at your own discretion.</p>
                        </div>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>Updates to Policy</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p>We may update this privacy policy periodically. Users will be notified of significant changes via email or platform notifications. Continued use of the platform after policy updates constitutes acceptance of the new terms.</p>
                        </div>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>Cookie Usage</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p>We use cookies to enhance user experience, analyze usage, and personalize content. You can manage cookie preferences in your browser settings. Essential cookies are required for site functionality.</p>
                        </div>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>Third-Party Services</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p>MonApe integrates with blockchain networks and third-party wallets. These services have their own privacy policies. We do not share personal data without consent, but transaction data is public on the blockchain.</p>
                        </div>
                        
                        <div class="policy-card">
                            <div class="card-header">
                                <h3>Contact Us</h3>
                                <div class="card-actions">
                                    <button class="copy-btn" onclick="copyText(this)">Copy</button>
                                    <button class="share-btn">Share</button>
                                </div>
                            </div>
                            <p style="margin-bottom: 12px;">For privacy concerns, support, or general inquiries:</p>
                            <div style="background: rgba(139, 92, 246, 0.1); padding: 12px; border-radius: 8px; margin-bottom: 8px;">
                                <strong>Email:</strong> support@monape.io
                                <button class="copy-btn" style="margin-left: 12px;" onclick="copyToClipboard('support@monape.io')">Copy</button>
                            </div>
                            <div style="background: rgba(139, 92, 246, 0.1); padding: 12px; border-radius: 8px;">
                                <strong>Phone:</strong> +1 (555) 123-4567
                                <button class="copy-btn" style="margin-left: 12px;" onclick="copyToClipboard('+1 (555) 123-4567')">Copy</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Assets Section -->
                <div class="section-content" data-section="account" data-subsection="assets">
                    <div class="sub-nav" style="display: flex; margin-bottom: 24px;">
                        <div class="sub-nav-item active" data-asset-tab="overview">Overview</div>
                        <div class="sub-nav-item" data-asset-tab="nfts">NFT Gallery</div>
                        <div class="sub-nav-item" data-asset-tab="collections">Collections</div>
                        <div class="sub-nav-item" data-asset-tab="accessories">Accessories</div>
                    </div>

                    <!-- Overview Tab -->
                    <div class="asset-tab-content active" data-asset-tab="overview">
                        <div class="asset-dashboard">
                            <div class="asset-card">
                                <div class="asset-icon"></div>
                                <div class="asset-value">$2,847.50</div>
                                <div class="asset-label">Total Portfolio</div>
                            </div>
                            <div class="asset-card">
                                <div class="asset-icon"></div>
                                <div class="asset-value">12</div>
                                <div class="asset-label">NFTs Owned</div>
                            </div>
                            <div class="asset-card">
                                <div class="asset-icon"></div>
                                <div class="asset-value">3</div>
                                <div class="asset-label">Collections</div>
                            </div>
                            <div class="asset-card">
                                <div class="asset-icon"></div>
                                <div class="asset-value">8</div>
                                <div class="asset-label">Accessories</div>
                            </div>
                        </div>

                        <div class="card">
                            <h2 class="card-title">Token Balances</h2>
                            <div id="tokenBalances"></div>
                        </div>
                    </div>

                    <!-- NFT Gallery Tab -->
                    <div class="asset-tab-content" data-asset-tab="nfts">
                        <div class="card">
                            <h2 class="card-title">My NFTs</h2>
                            
                            <!-- NFT Trading Panel -->
                            <div class="trade-panel-trigger" onclick="toggleTradePanel('nft')">
                                <div>
                                    <h3> Trade NFTs</h3>
                                    <p>Send and receive NFTs with other users</p>
                                </div>
                                <div class="trade-panel-icon">
                                    <i class='bx bx-chevron-down' id="nftTradePanelIcon"></i>
                                </div>
                            </div>

                            <div class="trade-panel-content" id="nftTradePanel">
                                <div class="trade-toggle-buttons">
                                    <button class="trade-toggle-btn active" onclick="switchTradeMode('nft', 'send')">
                                         Send NFTs
                                    </button>
                                    <button class="trade-toggle-btn" onclick="switchTradeMode('nft', 'receive')">
                                         Receive NFTs
                                    </button>
                                </div>

                                <!-- Send NFTs Section -->
                                <div class="trade-section active" id="nftSendSection">
                                    <div class="selected-items-display">
                                        <h4>Selected NFTs (<span id="nftSelectedCount">0</span>)</h4>
                                        <div class="selected-items-list" id="nftSelectedList"></div>
                                    </div>

                                    <h4 style="margin-bottom: 12px; color: var(--text-secondary);">Select NFTs to Send</h4>
                                    <div class="nft-selector-grid" id="nftSelectorGrid"></div>

                                    <div class="trade-form">
                                        <div class="form-group">
                                            <label class="form-label">Recipient Wallet Address *</label>
                                            <input type="text" class="form-input" id="nftRecipientAddress" placeholder="0x...">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Message (Optional)</label>
                                            <input type="text" class="form-input" id="nftSendMessage" placeholder="Add a note...">
                                        </div>
                                        <button class="btn btn-primary" style="width: 100%;" onclick="sendNFTs()">
                                            Send Selected NFTs
                                        </button>
                                    </div>
                                </div>

                                <!-- Receive NFTs Section -->
                                <div class="trade-section" id="nftReceiveSection">
                                    <div class="qr-code-display">
                                        <div class="qr-placeholder"></div>
                                        <p style="margin-top: 16px; color: #333; font-weight: 600;">Scan to Send NFTs</p>
                                    </div>

                                    <div class="trade-form">
                                        <h4 style="margin-bottom: 16px;">Your NFT Wallet Address</h4>
                                        <div style="background: var(--bg-secondary); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                                            <p style="word-break: break-all; font-family: monospace; margin-bottom: 12px;">
                                                0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb
                                            </p>
                                            <button class="btn btn-primary" style="width: 100%;" onclick="copyToClipboard('0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb')">
                                                <i class='bx bx-copy'></i> Copy Address
                                            </button>
                                        </div>
                                        <p style="color: var(--text-secondary); font-size: 13px; text-align: center;">
                                            Share this address with others to receive NFTs
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div class="nft-grid" id="myNFTGallery"></div>
                        </div>
                    </div>

                    <!-- Collections Tab -->
                    <div class="asset-tab-content" data-asset-tab="collections">
                        <div class="card">
                            <h2 class="card-title">My Collections</h2>
                            <div id="myCollections"></div>
                        </div>
                    </div>

                    <!-- Accessories Tab -->
                    <div class="asset-tab-content" data-asset-tab="accessories">
                        <div class="card">
                            <h2 class="card-title">My Accessories</h2>
                            
                            <!-- Accessory Trading Panel -->
                            <div class="trade-panel-trigger" onclick="toggleTradePanel('accessory')">
                                <div>
                                    <h3> Trade Accessories</h3>
                                    <p>Send and receive accessories with other users</p>
                                </div>
                                <div class="trade-panel-icon">
                                    <i class='bx bx-chevron-down' id="accessoryTradePanelIcon"></i>
                                </div>
                            </div>

                            <div class="trade-panel-content" id="accessoryTradePanel">
                                <div class="trade-toggle-buttons">
                                    <button class="trade-toggle-btn active" onclick="switchTradeMode('accessory', 'send')">
                                         Send Accessories
                                    </button>
                                    <button class="trade-toggle-btn" onclick="switchTradeMode('accessory', 'receive')">
                                         Receive Accessories
                                    </button>
                                </div>

                                <!-- Send Accessories Section -->
                                <div class="trade-section active" id="accessorySendSection">
                                    <div class="selected-items-display">
                                        <h4>Selected Accessories (<span id="accessorySelectedCount">0</span>)</h4>
                                        <div class="selected-items-list" id="accessorySelectedList"></div>
                                    </div>

                                    <h4 style="margin-bottom: 12px; color: var(--text-secondary);">Select Accessories to Send</h4>
                                    <div class="nft-selector-grid" id="accessorySelectorGrid"></div>

                                    <div class="trade-form">
                                        <div class="form-group">
                                            <label class="form-label">Recipient Wallet Address *</label>
                                            <input type="text" class="form-input" id="accessoryRecipientAddress" placeholder="0x...">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Message (Optional)</label>
                                            <input type="text" class="form-input" id="accessorySendMessage" placeholder="Add a note...">
                                        </div>
                                        <button class="btn btn-primary" style="width: 100%;" onclick="sendAccessories()">
                                            Send Selected Accessories
                                        </button>
                                    </div>
                                </div>

                                <!-- Receive Accessories Section -->
                                <div class="trade-section" id="accessoryReceiveSection">
                                    <div class="qr-code-display">
                                        <div class="qr-placeholder"></div>
                                        <p style="margin-top: 16px; color: #333; font-weight: 600;">Scan to Send Accessories</p>
                                    </div>

                                    <div class="trade-form">
                                        <h4 style="margin-bottom: 16px;">Your Accessories Wallet Address</h4>
                                        <div style="background: var(--bg-secondary); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                                            <p style="word-break: break-all; font-family: monospace; margin-bottom: 12px;">
                                                0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb
                                            </p>
                                            <button class="btn btn-primary" style="width: 100%;" onclick="copyToClipboard('0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb')">
                                                <i class='bx bx-copy'></i> Copy Address
                                            </button>
                                        </div>
                                        <p style="color: var(--text-secondary); font-size: 13px; text-align: center;">
                                            Share this address with others to receive accessories
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div class="nft-grid" id="myAccessories"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="bottom-nav-item active" data-section="create">
                <i class='bx bxs-brush bottom-nav-icon'></i>
                <div class="bottom-nav-label">Create</div>
            </div>
            <div class="bottom-nav-item" data-section="enhance">
                <i class='bx bxs-up-arrow-circle bottom-nav-icon'></i>
                <div class="bottom-nav-label">Enhance</div>
            </div>
            <div class="bottom-nav-item" data-section="merch">
                <i class='bx bxs-shopping-bag bottom-nav-icon'></i>
                <div class="bottom-nav-label">Merch</div>
            </div>
            <div class="bottom-nav-item" data-section="wallet">
                <i class='bx bxs-wallet bottom-nav-icon'></i>
                <div class="bottom-nav-label">Wallet</div>
            </div>
            <div class="bottom-nav-item" data-section="account">
                <i class='bx bxs-user-detail bottom-nav-icon'></i>
                <div class="bottom-nav-label">Account</div>
            </div>
        </nav>
    </div>

    <!-- Notification Panel -->
    <div class="overlay-panel" id="notificationPanel">
        <div class="overlay-header">
            <h3>Notifications</h3>
            <button class="close-btn" onclick="closePanel('notificationPanel')"></button>
        </div>
        <div class="overlay-content">
            <div class="card">
                <h4 style="margin-bottom: 8px;"> NFT Sold</h4>
                <p style="margin-bottom: 8px;">Cyber Ape #001 sold for 5.2 MON</p>
                <small style="color: var(--text-secondary);">2 hours ago</small>
            </div>
            <div class="card">
                <h4 style="margin-bottom: 8px;"> Payment Received</h4>
                <p style="margin-bottom: 8px;">50 MON received</p>
                <small style="color: var(--text-secondary);">5 hours ago</small>
            </div>
        </div>
    </div>

    <!-- Support Panel -->
    <div class="overlay-panel" id="supportPanel">
        <div class="overlay-header">
            <h3>Support</h3>
            <button class="close-btn" onclick="closePanel('supportPanel')"></button>
        </div>
        <div class="overlay-content">
            <div class="card">
                <h3 style="margin-bottom: 16px;">How can we help?</h3>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">Our support team is here 24/7</p>
                <button class="btn btn-primary" style="width: 100%; margin-bottom: 12px;">Start Live Chat</button>
                <button class="btn btn-secondary" style="width: 100%;">Email Support</button>
            </div>
        </div>
    </div>

    <!-- Asset Selector Modal -->
    <div class="modal-overlay" id="assetSelectorModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="assetSelectorTitle">Select Asset</h3>
                <button class="close-btn" onclick="closeModal('assetSelectorModal')"></button>
            </div>
            <div class="nft-grid" id="assetSelectorGrid"></div>
        </div>
    </div>

    <!-- Import NFT Modal -->
    <div class="modal-overlay" id="importModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Import NFT</h3>
                <button class="close-btn" onclick="closeModal('importModal')"></button>
            </div>
            <div class="form-group">
                <label class="form-label">Wallet Address</label>
                <input type="text" class="form-input" placeholder="0x...">
            </div>
            <div class="form-group">
                <label class="form-label">Contract Address</label>
                <input type="text" class="form-input" placeholder="0x...">
            </div>
            <div class="form-group">
                <label class="form-label">Token ID</label>
                <input type="text" class="form-input" placeholder="1234">
            </div>
            <button class="btn btn-primary" style="width: 100%;" onclick="importNFT()">Import NFT</button>
        </div>
    </div>

    <!-- Upload Collection Modal -->
    <div class="modal-overlay" id="uploadCollectionModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Upload Collection</h3>
                <button class="close-btn" onclick="closeModal('uploadCollectionModal')"></button>
            </div>
            <div class="file-upload-area" onclick="document.getElementById('collectionFileInput').click()">
                <div class="file-upload-icon"></div>
                <p>Click or drag collection file</p>
                <p class="file-upload-text">Accepted formats: ZIP, JSON</p>
                <input type="file" id="collectionFileInput" accept=".zip,.json" style="display: none;">
            </div>
            <button class="btn btn-primary" style="width: 100%;" onclick="processCollectionFile()">Upload Collection</button>
        </div>
    </div>

    <!-- Buy NFT Modal -->
    <div class="modal-overlay" id="buyNFTModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Purchase NFT</h3>
                <button class="close-btn" onclick="closeModal('buyNFTModal')"></button>
            </div>
            <div id="buyNFTContent"></div>
            <div style="display: flex; gap: 12px; margin-top: 20px;">
                <button class="btn btn-secondary" style="flex: 1;" onclick="closeModal('buyNFTModal')">Cancel</button>
                <button class="btn btn-primary" style="flex: 1;" onclick="openPinModal()">Confirm Purchase</button>
            </div>
        </div>
    </div>

    <!-- NFT Details Modal -->
    <div class="modal-overlay" id="nftDetailModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">NFT Details</h3>
                <button class="close-btn" onclick="closeModal('nftDetailModal')"></button>
            </div>
            <div style="text-align: center; margin-bottom: 24px;">
                <div style="font-size: 120px; margin-bottom: 20px;" id="detailIcon"></div>
            </div>
            <div style="background: rgba(139, 92, 246, 0.1); padding: 20px; border-radius: 12px; margin-bottom: 16px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <span style="color: var(--text-secondary);">Name:</span>
                    <span style="font-weight: 600;" id="detailName">Ape #001</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <span style="color: var(--text-secondary);">Collection:</span>
                    <span style="font-weight: 600;" id="detailCollection">Apes</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <span style="color: var(--text-secondary);">Rarity:</span>
                    <span id="detailRarityBadge"></span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <span style="color: var(--text-secondary);">Price:</span>
                    <span style="font-weight: 600; color: var(--primary);" id="detailPrice">5.2 MON</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span style="color: var(--text-secondary);">Owner:</span>
                    <span style="font-weight: 600;" id="detailOwner">0x742d...f0bEb</span>
                </div>
            </div>
            <button class="btn btn-primary" style="width: 100%;" onclick="buyFromDetails()">Buy Now</button>
        </div>
    </div>

    <!-- Accessory Details Modal -->
    <div class="modal-overlay" id="accessoryDetailModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Accessory Details</h3>
                <button class="close-btn" onclick="closeModal('accessoryDetailModal')"></button>
            </div>
            <div style="text-align: center; margin-bottom: 24px;">
                <div style="font-size: 120px; margin-bottom: 20px;" id="accDetailIcon"></div>
            </div>
            <div style="background: rgba(139, 92, 246, 0.1); padding: 20px; border-radius: 12px; margin-bottom: 16px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <span style="color: var(--text-secondary);">Name:</span>
                    <span style="font-weight: 600;" id="accDetailName">Sunglasses</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <span style="color: var(--text-secondary);">Description:</span>
                    <span style="font-weight: 600; text-align: right; max-width: 60%;" id="accDetailDesc">Classic aviator sunglasses</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span style="color: var(--text-secondary);">Price:</span>
                    <span style="font-weight: 600; color: var(--primary);" id="accDetailPrice">0.5 MON</span>
                </div>
            </div>
            <button class="btn btn-primary" style="width: 100%;" onclick="buyAccessoryFromDetails()">Purchase</button>
        </div>
    </div>

    <!-- Checkout Confirmation Modal -->
    <div class="modal-overlay" id="checkoutModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Checkout</h3>
                <button class="close-btn" onclick="closeModal('checkoutModal')"></button>
            </div>
            <div id="checkoutContent"></div>
            <div style="display: flex; gap: 12px; margin-top: 20px;">
                <button class="btn btn-secondary" style="flex: 1;" onclick="closeModal('checkoutModal')">Cancel</button>
                <button class="btn btn-primary" style="flex: 1;" onclick="confirmCheckout()">Confirm Order</button>
            </div>
        </div>
    </div>

    <!-- PIN Modal -->
    <div class="modal-overlay" id="pinModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Enter PIN</h3>
                <button class="close-btn" onclick="closeModal('pinModal')"></button>
            </div>
            <div style="display: flex; gap: 12px; justify-content: center; margin: 24px 0;">
                <input type="password" maxlength="1" style="width: 60px; height: 60px; text-align: center; font-size: 24px; font-weight: bold; background: rgba(139, 92, 246, 0.1); border: 2px solid var(--border); border-radius: 12px; color: var(--text-primary);" class="pin-input">
                <input type="password" maxlength="1" style="width: 60px; height: 60px; text-align: center; font-size: 24px; font-weight: bold; background: rgba(139, 92, 246, 0.1); border: 2px solid var(--border); border-radius: 12px; color: var(--text-primary);" class="pin-input">
                <input type="password" maxlength="1" style="width: 60px; height: 60px; text-align: center; font-size: 24px; font-weight: bold; background: rgba(139, 92, 246, 0.1); border: 2px solid var(--border); border-radius: 12px; color: var(--text-primary);" class="pin-input">
                <input type="password" maxlength="1" style="width: 60px; height: 60px; text-align: center; font-size: 24px; font-weight: bold; background: rgba(139, 92, 246, 0.1); border: 2px solid var(--border); border-radius: 12px; color: var(--text-primary);" class="pin-input">
            </div>
            <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="confirmPin()">Verify PIN</button>
        </div>
    </div>

    <!-- 2FA Modal -->
    <div class="modal-overlay" id="twofaModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Two-Factor Authentication</h3>
                <button class="close-btn" onclick="closeModal('twofaModal')"></button>
            </div>
            <div class="form-group">
                <label class="form-label">Enter 6-digit code</label>
                <input type="text" class="form-input" placeholder="000000" maxlength="6" style="text-align: center; font-size: 24px; letter-spacing: 8px;" id="twoFAInput">
            </div>
            <button class="btn btn-primary" style="width: 100%;" onclick="confirmTwoFA()">Verify & Complete</button>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal-overlay" id="confirmationModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">Transaction Complete</h3>
                <button class="close-btn" onclick="closeModal('confirmationModal')"></button>
            </div>
            <div style="text-align: center; padding: 40px;">
                <div style="font-size: 80px; margin-bottom: 20px; animation: scaleIn 0.5s ease;"></div>
                <h2 style="margin-bottom: 12px;">Success!</h2>
                <p style="color: var(--text-secondary); margin-bottom: 24px;">Your transaction has been confirmed on the blockchain.</p>
                <button class="btn btn-primary" style="width: 100%;" onclick="closeModal('confirmationModal')">Done</button>
            </div>
        </div>
    </div>

    <!-- Live Chat Panel -->
    <div class="live-chat-panel" id="liveChatPanel">
        <div class="chat-header">
            <h3> Live Support</h3>
            <button class="chat-close" onclick="closeLiveChat()"></button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <div class="chat-message bot">
                <div class="chat-avatar"></div>
                <div class="chat-bubble">
                    Hi! I'm your MonApe support assistant. How can I help you today?
                </div>
            </div>
        </div>
        <div class="chat-typing" id="chatTyping" style="display: none;">
            Support is typing...
        </div>
        <div class="chat-input-area">
            <div class="chat-input-wrapper">
                <input type="text" class="chat-input" id="chatInput" placeholder="Type your message..." onkeypress="handleChatKeyPress(event)">
                <button class="chat-send-btn" onclick="sendChatMessage()">
                    <i class='bx bx-send'></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // State Management
        const state = {
            currentSection: 'create',
            currentSubsection: 'market',
            currentAssetTab: 'overview',
            layers: [],
            myNFTs: [
                { id: 1, name: 'Cyber Ape #001', icon: '', price: 5.2, rarity: 'epic', collection: 'Cyber Apes' },
                { id: 2, name: 'Quantum Mask #042', icon: '', price: 7.8, rarity: 'legendary', collection: 'Digital Masks' },
                { id: 3, name: 'Golden Crown #007', icon: '', price: 12.0, rarity: 'mythic', collection: 'Royal Crowns' }
            ],
            marketNFTs: [],
            modifiedNFTs: [],
            collections: [
                { 
                    id: 1, 
                    name: 'Cyber Apes', 
                    icon: '', 
                    nftCount: 12, 
                    volume: 146.4,
                    nfts: []
                },
                { 
                    id: 2, 
                    name: 'Digital Masks', 
                    icon: '', 
                    nftCount: 12, 
                    volume: 203.6,
                    nfts: []
                },
                { 
                    id: 3, 
                    name: 'Royal Crowns', 
                    icon: '', 
                    nftCount: 12, 
                    volume: 287.2,
                    nfts: []
                },
                { 
                    id: 4, 
                    name: 'Neon Dragons', 
                    icon: '', 
                    nftCount: 12, 
                    volume: 198.5,
                    nfts: []
                },
                { 
                    id: 5, 
                    name: 'Space Warriors', 
                    icon: '', 
                    nftCount: 12, 
                    volume: 167.8,
                    nfts: []
                }
            ],
            accessories: [
                { id: 1, name: 'Sunglasses', icon: '', price: 0.5, description: 'Classic aviator sunglasses' },
                { id: 2, name: 'Top Hat', icon: '', price: 0.8, description: 'Elegant top hat for distinguished apes' },
                { id: 3, name: 'Crown', icon: '', price: 1.2, description: 'Royal golden crown' },
                { id: 4, name: 'Sword', icon: '', price: 1.5, description: 'Legendary warrior sword' },
                { id: 5, name: 'Shield', icon: '', price: 1.3, description: 'Protective battle shield' },
                { id: 6, name: 'Ring', icon: '', price: 0.7, description: 'Diamond engagement ring' },
                { id: 7, name: 'Necklace', icon: '', price: 0.9, description: 'Pearl necklace' },
                { id: 8, name: 'Watch', icon: '', price: 1.1, description: 'Luxury gold watch' },
                { id: 9, name: 'Earrings', icon: '', price: 0.6, description: 'Diamond stud earrings' },
                { id: 10, name: 'Bracelet', icon: '', price: 0.8, description: 'Silver charm bracelet' },
                { id: 11, name: 'Tie', icon: '', price: 0.4, description: 'Business silk tie' },
                { id: 12, name: 'Bow Tie', icon: '', price: 0.5, description: 'Classic bow tie' },
                { id: 13, name: 'Scarf', icon: '', price: 0.6, description: 'Warm winter scarf' },
                { id: 14, name: 'Gloves', icon: '', price: 0.5, description: 'Leather gloves' },
                { id: 15, name: 'Belt', icon: '', price: 0.7, description: 'Designer leather belt' },
                { id: 16, name: 'Helmet', icon: '', price: 1.0, description: 'Protective combat helmet' },
                { id: 17, name: 'Mask', icon: '', price: 0.9, description: 'Mysterious masquerade mask' },
                { id: 18, name: 'Cape', icon: '', price: 1.4, description: 'Superhero cape' },
                { id: 19, name: 'Wings', icon: '', price: 1.6, description: 'Magical fairy wings' },
                { id: 20, name: 'Halo', icon: '', price: 1.8, description: 'Angelic halo' },
                { id: 21, name: 'Horns', icon: '', price: 1.7, description: 'Devilish horns' },
                { id: 22, name: 'Headphones', icon: '', price: 0.8, description: 'Premium headphones' },
                { id: 23, name: 'Microphone', icon: '', price: 0.9, description: 'Professional microphone' },
                { id: 24, name: 'Guitar', icon: '', price: 2.0, description: 'Electric guitar' }
            ],
            myAccessories: [],
            merchItems: [
                { id: 1, name: 'MonApe Tee', icon: '', price: 45, rating: 4.8, reviews: 234, rarity: 'common' },
                { id: 2, name: 'Ape Cap', icon: '', price: 35, rating: 4.6, reviews: 189, rarity: 'common' },
                { id: 3, name: 'Hoodie Pro', icon: '', price: 85, rating: 4.9, reviews: 456, rarity: 'exclusive' },
                { id: 4, name: 'Sneakers', icon: '', price: 120, rating: 4.7, reviews: 312, rarity: 'limited' },
                { id: 5, name: 'Backpack', icon: '', price: 65, rating: 4.5, reviews: 167, rarity: 'rare' },
                { id: 6, name: 'Jacket', icon: '', price: 95, rating: 4.8, reviews: 278, rarity: 'exclusive' }
            ],
            cart: [],
            wishlist: [],
            orders: [
                { 
                    id: 1, 
                    title: 'MonApe Tee & Cap', 
                    status: 'processing', 
                    progress: 60, 
                    items: ['MonApe Tee', 'Ape Cap'], 
                    total: 80, 
                    date: 'Nov 10, 2025', 
                    tracking: 'MNP123456789',
                    trackingSteps: [
                        { title: 'Order Placed', time: 'Nov 10, 2025 - 10:30 AM', completed: true },
                        { title: 'Processing', time: 'Nov 10, 2025 - 2:15 PM', completed: true },
                        { title: 'Shipped', time: 'Nov 11, 2025 - 9:00 AM', completed: true },
                        { title: 'In Transit', time: 'Estimated: Nov 13, 2025', completed: false },
                        { title: 'Delivered', time: 'Estimated: Nov 15, 2025', completed: false }
                    ]
                },
                { 
                    id: 2, 
                    title: 'Hoodie Pro', 
                    status: 'shipped', 
                    progress: 80, 
                    items: ['Hoodie Pro'], 
                    total: 85, 
                    date: 'Nov 8, 2025', 
                    tracking: 'MNP987654321',
                    trackingSteps: [
                        { title: 'Order Placed', time: 'Nov 8, 2025 - 3:20 PM', completed: true },
                        { title: 'Processing', time: 'Nov 8, 2025 - 5:45 PM', completed: true },
                        { title: 'Shipped', time: 'Nov 9, 2025 - 11:30 AM', completed: true },
                        { title: 'In Transit', time: 'Nov 10, 2025 - 2:00 PM', completed: true },
                        { title: 'Out for Delivery', time: 'Estimated: Nov 13, 2025', completed: false }
                    ]
                },
                { 
                    id: 3, 
                    title: 'Sneakers', 
                    status: 'delivered', 
                    progress: 100, 
                    items: ['Sneakers'], 
                    total: 120, 
                    date: 'Nov 5, 2025', 
                    tracking: 'MNP456789123',
                    trackingSteps: [
                        { title: 'Order Placed', time: 'Nov 5, 2025 - 1:10 PM', completed: true },
                        { title: 'Processing', time: 'Nov 5, 2025 - 3:30 PM', completed: true },
                        { title: 'Shipped', time: 'Nov 6, 2025 - 8:00 AM', completed: true },
                        { title: 'In Transit', time: 'Nov 7, 2025 - 10:15 AM', completed: true },
                        { title: 'Delivered', time: 'Nov 8, 2025 - 4:20 PM', completed: true }
                    ]
                }
            ],
            tokens: [
                { symbol: 'MON', name: 'Monad', balance: 1250.50, icon: '' },
                { symbol: 'MONAPE', name: 'MonApe Token', balance: 5000, icon: '' },
                { symbol: 'USDT', name: 'Tether', balance: 850.25, icon: '' }
            ],
            transactions: [
                { type: 'received', amount: '+50 MON', from: '0xabc...def', date: 'Nov 13, 2025' },
                { type: 'sent', amount: '-25 MONAPE', to: '0xdef...ghi', date: 'Nov 12, 2025' },
                { type: 'swap', amount: '100 MON  150 USDT', date: 'Nov 11, 2025' }
            ],
            selectedNFT: null,
            selectedAccessory: null,
            assetSelectorMode: null,
            currentPurchase: null,
            transactionType: null,
            currentOrder: null,
            filtersActive: false,
            selectedNFTsForTrade: [],
            selectedAccessoriesForTrade: []
        };

        // Initialize App
        function initApp() {
            generateCollectionNFTs();
            setupNavigation();
            renderMarket();
            renderCollections();
            renderAccessories();
            renderMerchItems();
            renderMyNFTs();
            renderMyAccessories();
            renderTokenBalances();
            renderTransactionHistory();
            renderModifiedNFTs();
            renderOrders();
            renderWishlist();
            setupCarousel();
            setupCreateCards();
            setupLayerBuilder();
            setupTransferWallets();
            setupAssetTabs();
            setupPinInputs();
        }

        // Generate NFTs for each collection
        function generateCollectionNFTs() {
            const rarities = ['common', 'rare', 'epic', 'legendary', 'mythic'];
            const icons = {
                'Cyber Apes': ['', '', '', ''],
                'Digital Masks': ['', '', '', ''],
                'Royal Crowns': ['', '', '', ''],
                'Neon Dragons': ['', '', '', ''],
                'Space Warriors': ['', '', '', '']
            };

            state.collections.forEach(collection => {
                collection.nfts = [];
                const collectionIcons = icons[collection.name] || [collection.icon];
                
                for (let i = 1; i <= 12; i++) {
                    const rarity = rarities[Math.floor(Math.random() * rarities.length)];
                    const icon = collectionIcons[Math.floor(Math.random() * collectionIcons.length)];
                    const price = (Math.random() * 15 + 2).toFixed(1);
                    
                    const nft = {
                        id: Date.now() + i + collection.id * 1000,
                        name: `${collection.name} #${String(i).padStart(3, '0')}`,
                        icon: icon,
                        price: parseFloat(price),
                        rarity: rarity,
                        type: 'regular',
                        collection: collection.name
                    };
                    
                    collection.nfts.push(nft);
                    state.marketNFTs.push(nft);
                }
            });
        }

        // Navigation
        function setupNavigation() {
            document.querySelectorAll('.nav-item, .bottom-nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    const section = item.dataset.section;
                    switchSection(section);
                });
            });

            document.querySelectorAll('.sub-nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    if (item.dataset.subsection) {
                        switchSubsection(item.dataset.subsection);
                    } else if (item.dataset.assetTab) {
                        switchAssetTab(item.dataset.assetTab);
                    }
                });
            });

            document.getElementById('notificationBtn').addEventListener('click', () => {
                document.getElementById('notificationPanel').classList.add('active');
            });

            document.getElementById('supportBtn').addEventListener('click', () => {
                document.getElementById('supportPanel').classList.add('active');
            });

            document.getElementById('backToMarket').addEventListener('click', () => {
                document.getElementById('collectionView').classList.remove('active');
                document.querySelector('[data-section="create"][data-subsection="market"]').classList.add('active');
            });
        }

        function switchSection(section) {
            state.currentSection = section;
            
            document.querySelectorAll('.nav-item, .bottom-nav-item').forEach(item => {
                item.classList.toggle('active', item.dataset.section === section);
            });

            document.querySelectorAll('.sub-nav').forEach(nav => {
                nav.classList.toggle('active', nav.dataset.section === section);
            });

            const activeSubNav = document.querySelector(`.sub-nav.active[data-section="${section}"]`);
            if (activeSubNav) {
                const firstSubItem = activeSubNav.querySelector('.sub-nav-item');
                if (firstSubItem) {
                    const subsection = section === 'create' ? 'market' : firstSubItem.dataset.subsection;
                    switchSubsection(subsection);
                }
            }

            updateHeaderTitle();
        }

        function switchSubsection(subsection) {
            state.currentSubsection = subsection;
            
            const currentNav = document.querySelector(`.sub-nav.active[data-section="${state.currentSection}"]`);
            if (currentNav) {
                currentNav.querySelectorAll('.sub-nav-item').forEach(item => {
                    item.classList.toggle('active', item.dataset.subsection === subsection);
                });
            }

            showContent();
        }

        function switchAssetTab(tab) {
            state.currentAssetTab = tab;
            
            // Update button states
            document.querySelectorAll('[data-asset-tab]').forEach(el => {
                if (el.classList.contains('sub-nav-item')) {
                    el.classList.toggle('active', el.dataset.assetTab === tab);
                }
            });
            
            // Hide all asset tab content first
            document.querySelectorAll('.asset-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Show only the selected tab
            const activeTab = document.querySelector(`.asset-tab-content[data-asset-tab="${tab}"]`);
            if (activeTab) {
                activeTab.classList.add('active');
            }
        }

        function showContent() {
            document.querySelectorAll('.section-content').forEach(content => {
                const matches = content.dataset.section === state.currentSection &&
                               content.dataset.subsection === state.currentSubsection;
                content.classList.toggle('active', matches);
            });
        }

        function updateHeaderTitle() {
            const titles = {
                create: 'Create',
                enhance: 'Enhance',
                merch: 'Merchandise',
                wallet: 'Wallet',
                account: 'Account'
            };
            document.getElementById('headerTitle').textContent = titles[state.currentSection];
        }

        function setupAssetTabs() {
            // Already handled in switchAssetTab
        }

        // Market Rendering
        function renderMarket() {
            const allNFTs = [...state.marketNFTs, ...state.modifiedNFTs];
            const container = document.getElementById('nftMarket');
            container.innerHTML = allNFTs.map(nft => `
                <div class="nft-card">
                    <div class="nft-image">
                        ${nft.icon}
                        <div class="rarity-badge rarity-${nft.rarity}">${nft.rarity}</div>
                    </div>
                    <div class="nft-info">
                        <div class="nft-name">${nft.name}</div>
                        <div class="nft-price">${nft.price} MON</div>
                        <div class="nft-actions">
                            <button class="btn btn-primary btn-small" onclick="buyNFT(${nft.id})">Buy</button>
                            <button class="btn btn-secondary btn-small" onclick="viewNFTDetails(${nft.id})">Details</button>
                        </div>
                    </div>
                </div>
            `).join('');

            // Setup filters
            setupMarketFilters();
        }

        function setupMarketFilters() {
            const searchInput = document.getElementById('marketSearch');
            const rarityFilter = document.getElementById('rarityFilter');
            const priceFilter = document.getElementById('priceFilter');
            const typeFilter = document.getElementById('typeFilter');
            const clearBtn = document.getElementById('clearFilters');

            const checkFiltersActive = () => {
                const hasFilters = searchInput.value || rarityFilter.value || priceFilter.value || typeFilter.value;
                state.filtersActive = hasFilters;
                clearBtn.classList.toggle('active', hasFilters);
            };

            const applyFilters = () => {
                checkFiltersActive();
                const search = searchInput.value.toLowerCase();
                const rarity = rarityFilter.value;
                const price = priceFilter.value;
                const type = typeFilter.value;

                let filtered = [...state.marketNFTs, ...state.modifiedNFTs];

                if (search) {
                    filtered = filtered.filter(nft => 
                        nft.name.toLowerCase().includes(search) ||
                        nft.collection.toLowerCase().includes(search)
                    );
                }
                if (rarity) {
                    filtered = filtered.filter(nft => nft.rarity === rarity);
                }
                if (price) {
                    if (price === '0-5') filtered = filtered.filter(nft => nft.price <= 5);
                    if (price === '5-10') filtered = filtered.filter(nft => nft.price > 5 && nft.price <= 10);
                    if (price === '10+') filtered = filtered.filter(nft => nft.price > 10);
                }
                if (type) {
                    if (type === 'nfts') filtered = filtered.filter(nft => nft.type === 'regular');
                    if (type === 'modified-nfts') filtered = filtered.filter(nft => nft.type === 'modified');
                }

                const container = document.getElementById('nftMarket');
                container.innerHTML = filtered.map(nft => `
                    <div class="nft-card">
                        <div class="nft-image">
                            ${nft.icon}
                            <div class="rarity-badge rarity-${nft.rarity}">${nft.rarity}</div>
                        </div>
                        <div class="nft-info">
                            <div class="nft-name">${nft.name}</div>
                            <div class="nft-price">${nft.price} MON</div>
                            <div class="nft-actions">
                                <button class="btn btn-primary btn-small" onclick="buyNFT(${nft.id})">Buy</button>
                                <button class="btn btn-secondary btn-small" onclick="viewNFTDetails(${nft.id})">Details</button>
                            </div>
                        </div>
                    </div>
                `).join('');

                if (filtered.length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 60px; grid-column: 1/-1;">No NFTs found matching your filters</p>';
                }
            };

            searchInput.addEventListener('input', applyFilters);
            rarityFilter.addEventListener('change', applyFilters);
            priceFilter.addEventListener('change', applyFilters);
            typeFilter.addEventListener('change', applyFilters);
            clearBtn.addEventListener('click', () => {
                searchInput.value = '';
                rarityFilter.value = '';
                priceFilter.value = '';
                typeFilter.value = '';
                applyFilters();
            });
        }

        // Collections
        function renderCollections() {
            const container = document.getElementById('collectionScroll');
            container.innerHTML = state.collections.map(col => `
                <div class="collection-card" onclick="viewCollection(${col.id})">
                    <div class="collection-icon">${col.icon}</div>
                    <div class="collection-name">${col.name}</div>
                    <div class="collection-stats">
                        <div class="collection-stat">
                            <div class="collection-stat-value">${col.nftCount}</div>
                            <div class="collection-stat-label">NFTs</div>
                        </div>
                        <div class="collection-stat">
                            <div class="collection-stat-value">${col.volume}</div>
                            <div class="collection-stat-label">Volume</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function setupCarousel() {
            const scroll = document.getElementById('collectionScroll');
            const left = document.getElementById('carouselLeft');
            const right = document.getElementById('carouselRight');
            
            let currentScroll = 0;
            const cardWidth = 320 + 24; // card width + gap

            const updateButtons = () => {
                const maxScroll = scroll.scrollWidth - scroll.clientWidth;
                currentScroll = scroll.scrollLeft;
                
                if (currentScroll <= 0) {
                    left.classList.add('disabled');
                } else {
                    left.classList.remove('disabled');
                }
                
                if (currentScroll >= maxScroll - 1) {
                    right.classList.add('disabled');
                } else {
                    right.classList.remove('disabled');
                }
            };

            left.addEventListener('click', () => {
                scroll.scrollBy({ left: -cardWidth, behavior: 'smooth' });
                setTimeout(updateButtons, 300);
            });

            right.addEventListener('click', () => {
                scroll.scrollBy({ left: cardWidth, behavior: 'smooth' });
                setTimeout(updateButtons, 300);
            });

            scroll.addEventListener('scroll', updateButtons);
            
            // Initial button state
            updateButtons();
            
            // Update on window resize
            window.addEventListener('resize', updateButtons);
        }

        function viewCollection(id) {
            const collection = state.collections.find(c => c.id === id);
            const collectionNFTs = collection.nfts;
            
            document.getElementById('collectionViewTitle').textContent = collection.name;
            const container = document.getElementById('collectionNFTs');
            container.innerHTML = collectionNFTs.map(nft => `
                <div class="nft-card">
                    <div class="nft-image">
                        ${nft.icon}
                        <div class="rarity-badge rarity-${nft.rarity}">${nft.rarity}</div>
                    </div>
                    <div class="nft-info">
                        <div class="nft-name">${nft.name}</div>
                        <div class="nft-price">${nft.price} MON</div>
                        <div class="nft-actions">
                            <button class="btn btn-primary btn-small" onclick="buyNFT(${nft.id})">Buy</button>
                            <button class="btn btn-secondary btn-small" onclick="viewNFTDetails(${nft.id})">Details</button>
                        </div>
                    </div>
                </div>
            `).join('');

            document.querySelector('[data-section="create"][data-subsection="market"]').classList.remove('active');
            document.getElementById('collectionView').classList.add('active');
        }

        // Create Section
        function setupCreateCards() {
            document.querySelectorAll('.create-type-card').forEach(card => {
                card.addEventListener('click', () => {
                    const type = card.dataset.type;
                    document.getElementById('createTypeCards').style.display = 'none';
                    if (type === 'nft') {
                        document.getElementById('nftCreator').classList.add('active');
                    } else {
                        document.getElementById('collectionCreator').classList.add('active');
                    }
                });
            });

            document.getElementById('backToCreateMain').addEventListener('click', () => {
                document.getElementById('nftCreator').classList.remove('active');
                document.getElementById('createTypeCards').style.display = 'grid';
            });

            document.getElementById('backToCreateMainCol').addEventListener('click', () => {
                document.getElementById('collectionCreator').classList.remove('active');
                document.getElementById('createTypeCards').style.display = 'grid';
            });
        }

        function setupLayerBuilder() {
            const layerUpload = document.getElementById('layerUpload');
            layerUpload.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        const layer = {
                            id: Date.now(),
                            name: file.name,
                            data: event.target.result
                        };
                        state.layers.push(layer);
                        renderLayers();
                        updateLayerPreview();
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        function renderLayers() {
            const container = document.getElementById('layerList');
            container.innerHTML = state.layers.map((layer, index) => `
                <div class="layer-item">
                    <span>${layer.name}</span>
                    <div class="layer-controls">
                        <button class="btn btn-secondary btn-small" onclick="moveLayer(${index}, -1)" ${index === 0 ? 'disabled' : ''}></button>
                        <button class="btn btn-secondary btn-small" onclick="moveLayer(${index}, 1)" ${index === state.layers.length - 1 ? 'disabled' : ''}></button>
                        <button class="btn btn-secondary btn-small" onclick="removeLayer(${index})">Remove</button>
                    </div>
                </div>
            `).join('');
        }

        function moveLayer(index, direction) {
            const newIndex = index + direction;
            if (newIndex >= 0 && newIndex < state.layers.length) {
                [state.layers[index], state.layers[newIndex]] = [state.layers[newIndex], state.layers[index]];
                renderLayers();
                updateLayerPreview();
            }
        }

        function removeLayer(index) {
            state.layers.splice(index, 1);
            renderLayers();
            updateLayerPreview();
        }

        function updateLayerPreview() {
            const preview = document.getElementById('layerPreview');
            if (state.layers.length === 0) {
                preview.innerHTML = '<span style="color: var(--text-secondary);">Layer preview</span>';
                return;
            }

            preview.innerHTML = state.layers.map(layer => 
                `<img src="${layer.data}" style="position: absolute; width: 100%; height: 100%; object-fit: contain;">`
            ).join('');
        }

        function createNFT() {
            const name = document.getElementById('nftName').value;
            const description = document.getElementById('nftDescription').value;
            const rarity = document.getElementById('nftRarity').value;
            const collection = document.getElementById('nftCollection').value;

            if (!name) {
                showToast('Please enter NFT name', 'error');
                return;
            }

            const newNFT = {
                id: Date.now(),
                name,
                icon: '',
                price: 0,
                rarity,
                type: 'regular',
                collection: collection || 'None'
            };

            state.myNFTs.push(newNFT);
            showToast('NFT created successfully! ', 'success');
            
            // Reset form
            document.getElementById('nftName').value = '';
            document.getElementById('nftDescription').value = '';
            state.layers = [];
            renderLayers();
            updateLayerPreview();
            
            // Switch to assets
            switchSection('account');
            switchSubsection('assets');
            switchAssetTab('nfts');
        }

        function createCollection() {
            const name = document.getElementById('collectionName').value;
            const symbol = document.getElementById('collectionSymbol').value;
            const description = document.getElementById('collectionDescription').value;
            const supply = document.getElementById('collectionSupply').value;

            if (!name || !symbol) {
                showToast('Please fill required fields', 'error');
                return;
            }

            const newCollection = {
                id: Date.now(),
                name,
                icon: '',
                nftCount: 0,
                volume: 0,
                symbol,
                description,
                supply: parseInt(supply) || 0,
                nfts: []
            };

            state.collections.push(newCollection);
            renderCollections();
            
            // Add to collection selector
            const selector = document.getElementById('nftCollection');
            const option = document.createElement('option');
            option.value = name;
            option.textContent = name;
            selector.appendChild(option);

            showToast('Collection created successfully! ', 'success');
            
            // Reset and go back
            document.getElementById('collectionName').value = '';
            document.getElementById('collectionSymbol').value = '';
            document.getElementById('collectionDescription').value = '';
            document.getElementById('collectionSupply').value = '';
            
            document.getElementById('collectionCreator').classList.remove('active');
            document.getElementById('createTypeCards').style.display = 'grid';
        }

        // List Section
        function openAssetSelector(mode) {
            state.assetSelectorMode = mode;
            const modal = document.getElementById('assetSelectorModal');
            const title = document.getElementById('assetSelectorTitle');
            const grid = document.getElementById('assetSelectorGrid');

            if (mode === 'list') {
                title.textContent = 'Select Item to List';
                const items = [...state.myNFTs];
                grid.innerHTML = items.map(item => `
                    <div class="nft-card" onclick="selectAsset('list', ${item.id}, '${item.name}')">
                        <div class="nft-image">${item.icon}</div>
                        <div class="nft-info">
                            <div class="nft-name">${item.name}</div>
                            <div class="nft-price">${item.price || 'Not listed'}</div>
                        </div>
                    </div>
                `).join('');
            } else if (mode === 'nft') {
                title.textContent = 'Select NFT';
                grid.innerHTML = state.myNFTs.map(nft => `
                    <div class="nft-card" onclick="selectAsset('nft', ${nft.id}, '${nft.name}')">
                        <div class="nft-image">${nft.icon}</div>
                        <div class="nft-info">
                            <div class="nft-name">${nft.name}</div>
                        </div>
                    </div>
                `).join('');
            } else if (mode === 'accessory') {
                title.textContent = 'Select Accessory';
                grid.innerHTML = state.myAccessories.map(acc => `
                    <div class="nft-card" onclick="selectAsset('accessory', ${acc.id}, '${acc.name}')">
                        <div class="nft-image">${acc.icon}</div>
                        <div class="nft-info">
                            <div class="nft-name">${acc.name}</div>
                        </div>
                    </div>
                `).join('');
            }

            modal.classList.add('active');
        }

        function selectAsset(mode, id, name) {
            if (mode === 'list') {
                document.getElementById('listItemName').value = name;
                document.getElementById('listingForm').style.display = 'block';
            } else if (mode === 'nft') {
                state.selectedNFT = id;
                document.getElementById('upgradeNFT').value = name;
                checkUpgradeForm();
            } else if (mode === 'accessory') {
                state.selectedAccessory = id;
                document.getElementById('upgradeAccessory').value = name;
                checkUpgradeForm();
            }
            
            closeModal('assetSelectorModal');
        }

        function checkUpgradeForm() {
            if (state.selectedNFT && state.selectedAccessory) {
                document.getElementById('upgradeForm').style.display = 'block';
            }
        }

        function listItem() {
            const price = document.getElementById('listPrice').value;
            if (!price || price <= 0) {
                showToast('Please enter a valid price', 'error');
                return;
            }

            showToast('Item listed successfully! ', 'success');
            document.getElementById('listingForm').style.display = 'none';
            document.getElementById('listItemName').value = '';
            document.getElementById('listPrice').value = '';
        }

        function openImportModal() {
            document.getElementById('importModal').classList.add('active');
        }

        function importNFT() {
            showToast('NFT imported successfully! ', 'success');
            closeModal('importModal');
        }

        function openCollectionUpload() {
            document.getElementById('uploadCollectionModal').classList.add('active');
        }

        function processCollectionFile() {
            const input = document.getElementById('collectionFileInput');
            if (input.files.length === 0) {
                showToast('Please select a file', 'error');
                return;
            }
            
            showToast('Collection uploaded successfully! ', 'success');
            closeModal('uploadCollectionModal');
        }

        // Enhance Section
        function upgradeNFT() {
            if (!state.selectedNFT || !state.selectedAccessory) {
                showToast('Please select both NFT and accessory', 'error');
                return;
            }

            const nft = state.myNFTs.find(n => n.id === state.selectedNFT);
            const accessory = state.myAccessories.find(a => a.id === state.selectedAccessory);

            const modifiedNFT = {
                id: Date.now(),
                name: `${nft.name} + ${accessory.name}`,
                icon: `${nft.icon}${accessory.icon}`,
                price: nft.price + 2,
                rarity: nft.rarity,
                type: 'modified',
                collection: nft.collection
            };

            state.modifiedNFTs.push(modifiedNFT);
            state.myAccessories = state.myAccessories.filter(a => a.id !== state.selectedAccessory);
            
            renderModifiedNFTs();
            renderMyAccessories();
            renderMarket();
            
            showToast('NFT upgraded successfully! ', 'success');
            
            document.getElementById('upgradeForm').style.display = 'none';
            document.getElementById('upgradeNFT').value = '';
            document.getElementById('upgradeAccessory').value = '';
            state.selectedNFT = null;
            state.selectedAccessory = null;
        }

        function renderModifiedNFTs() {
            const container = document.getElementById('modifiedNFTs');
            if (state.modifiedNFTs.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 60px; grid-column: 1/-1;">No modified NFTs yet</p>';
                return;
            }
            container.innerHTML = state.modifiedNFTs.map(nft => `
                <div class="nft-card">
                    <div class="nft-image">${nft.icon}</div>
                    <div class="nft-info">
                        <div class="nft-name">${nft.name}</div>
                        <div class="nft-price">${nft.price} MON</div>
                        <button class="btn btn-primary btn-small" style="width: 100%;" onclick="listModifiedNFT(${nft.id})">List</button>
                    </div>
                </div>
            `).join('');
        }

        function listModifiedNFT(id) {
            showToast('Modified NFT listed successfully! ', 'success');
            const nft = state.modifiedNFTs.find(n => n.id === id);
            if (nft) {
                state.marketNFTs.push(nft);
                renderMarket();
            }
        }

        function renderAccessories() {
            const container = document.getElementById('accessoriesShop');
            container.innerHTML = state.accessories.map(acc => `
                <div class="nft-card">
                    <div class="nft-image">${acc.icon}</div>
                    <div class="nft-info">
                        <div class="nft-name">${acc.name}</div>
                        <div class="nft-price">${acc.price} MON</div>
                        <div class="nft-actions">
                            <button class="btn btn-primary btn-small" onclick="buyAccessory(${acc.id})">Purchase</button>
                            <button class="btn btn-secondary btn-small" onclick="viewAccessoryDetails(${acc.id})">Details</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function viewAccessoryDetails(id) {
            const acc = state.accessories.find(a => a.id === id);
            if (!acc) return;

            document.getElementById('accDetailIcon').textContent = acc.icon;
            document.getElementById('accDetailName').textContent = acc.name;
            document.getElementById('accDetailDesc').textContent = acc.description;
            document.getElementById('accDetailPrice').textContent = `${acc.price} MON`;
            
            state.currentAccessoryView = id;
            openModal('accessoryDetailModal');
        }

        function buyAccessoryFromDetails() {
            closeModal('accessoryDetailModal');
            if (state.currentAccessoryView) {
                buyAccessory(state.currentAccessoryView);
            }
        }

        function buyAccessory(id) {
            const acc = state.accessories.find(a => a.id === id);
            
            document.getElementById('buyNFTContent').innerHTML = `
                <div style="text-align: center; margin-bottom: 24px;">
                    <div style="font-size: 100px; margin-bottom: 20px;">${acc.icon}</div>
                    <h3 style="margin-bottom: 12px;">${acc.name}</h3>
                    <p style="color: var(--text-secondary);">${acc.description}</p>
                </div>
                <div class="transaction-summary">
                    <div class="summary-row">
                        <span class="summary-label">Price:</span>
                        <span class="summary-value">${acc.price} MON</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Gas Fee:</span>
                        <span class="summary-value">0.02 MON</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Total:</span>
                        <span class="summary-value" style="color: var(--primary);">${(acc.price + 0.02).toFixed(2)} MON</span>
                    </div>
                </div>
            `;
            
            state.currentPurchase = {type: 'accessory', item: acc};
            openModal('buyNFTModal');
        }

        // Merch Section
        function renderMerchItems() {
            const container = document.getElementById('merchItems');
            container.innerHTML = state.merchItems.map(item => {
                const isInWishlist = state.wishlist.some(w => w.id === item.id);
                return `
                <div class="nft-card">
                    <div class="nft-image">${item.icon}</div>
                    <div class="nft-info">
                        <div class="nft-name">${item.name}</div>
                        <div class="nft-price">${item.price}</div>
                        <div class="nft-actions">
                            <button class="btn btn-primary btn-small" onclick="addToCart(${item.id})">Add to Cart</button>
                            <button class="btn btn-secondary btn-small wishlist-btn ${isInWishlist ? 'active' : ''}" onclick="toggleWishlist(${item.id})">
                                <i class='bx ${isInWishlist ? 'bxs-heart' : 'bx-heart'}'></i>
                            </button>
                        </div>
                    </div>
                </div>
            `}).join('');
        }

        function toggleWishlist(id) {
            const item = state.merchItems.find(m => m.id === id);
            const existingIndex = state.wishlist.findIndex(w => w.id === id);
            
            if (existingIndex > -1) {
                state.wishlist.splice(existingIndex, 1);
                showToast(`${item.name} removed from wishlist`, 'success');
            } else {
                state.wishlist.push({...item});
                showToast(`${item.name} added to wishlist! `, 'success');
            }
            
            renderMerchItems();
            renderWishlist();
        }

        function renderWishlist() {
            const container = document.getElementById('wishlistItems');
            
            if (state.wishlist.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 60px; grid-column: 1/-1;">Your wishlist is empty</p>';
                return;
            }
            
            container.innerHTML = state.wishlist.map(item => `
                <div class="nft-card">
                    <div class="nft-image">${item.icon}</div>
                    <div class="nft-info">
                        <div class="nft-name">${item.name}</div>
                        <div class="nft-price">${item.price}</div>
                        <div class="nft-actions">
                            <button class="btn btn-primary btn-small" onclick="addToCart(${item.id})">Add to Cart</button>
                            <button class="btn btn-secondary btn-small" onclick="removeFromWishlist(${item.id})">Remove</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function removeFromWishlist(id) {
            const item = state.wishlist.find(w => w.id === id);
            state.wishlist = state.wishlist.filter(w => w.id !== id);
            showToast(`${item.name} removed from wishlist`, 'success');
            renderWishlist();
            renderMerchItems();
        }

        function addToWishList(id) {
            toggleWishlist(id);
        }

        function addToCart(id) {
            const item = state.merchItems.find(m => m.id === id);
            const existing = state.cart.find(c => c.id === id);
            
            if (existing) {
                existing.quantity++;
            } else {
                state.cart.push({...item, quantity: 1});
            }
            
            renderCart();
            showToast(`${item.name} added to cart! `, 'success');
        }

        function renderCart() {
            const container = document.getElementById('cartItems');
            const totalEl = document.getElementById('cartTotal');
            
            if (state.cart.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 60px;">Cart is empty</p>';
                totalEl.textContent = 'Total: $0.00';
                return;
            }
            
            container.innerHTML = state.cart.map(item => `
                <div class="card" style="display: flex; align-items: center; gap: 20px; margin-bottom: 16px;">
                    <div style="font-size: 48px;">${item.icon}</div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 18px;">${item.name}</div>
                        <div style="color: var(--text-secondary);">${item.price}</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <button class="btn btn-secondary btn-small" onclick="updateCartQty(${item.id}, -1)">-</button>
                        <span style="min-width: 40px; text-align: center;">${item.quantity}</span>
                        <button class="btn btn-secondary btn-small" onclick="updateCartQty(${item.id}, 1)">+</button>
                    </div>
                    <div style="font-weight: 700; font-size: 20px;">${(item.price * item.quantity).toFixed(2)}</div>
                </div>
            `).join('');
            
            const total = state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            totalEl.textContent = `Total: ${total.toFixed(2)}`;
        }

        function updateCartQty(id, delta) {
            const item = state.cart.find(c => c.id === id);
            if (item) {
                item.quantity += delta;
                if (item.quantity <= 0) {
                    state.cart = state.cart.filter(c => c.id !== id);
                }
                renderCart();
            }
        }

        function proceedToCheckout() {
            if (state.cart.length === 0) {
                showToast('Cart is empty!', 'error');
                return;
            }

            const subtotal = state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = 10;
            const tax = subtotal * 0.08;
            const total = subtotal + shipping + tax;

            document.getElementById('checkoutContent').innerHTML = `
                <div style="margin-bottom: 24px;">
                    <h3 style="margin-bottom: 16px;">Order Summary</h3>
                    ${state.cart.map(item => `
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--border);">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <span style="font-size: 24px;">${item.icon}</span>
                                <div>
                                    <div style="font-weight: 600;">${item.name}</div>
                                    <div style="color: var(--text-secondary); font-size: 13px;">Qty: ${item.quantity}</div>
                                </div>
                            </div>
                            <div style="font-weight: 600;">${(item.price * item.quantity).toFixed(2)}</div>
                        </div>
                    `).join('')}
                </div>
                <div class="transaction-summary">
                    <div class="summary-row">
                        <span class="summary-label">Subtotal:</span>
                        <span class="summary-value">${subtotal.toFixed(2)}</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Shipping:</span>
                        <span class="summary-value">${shipping.toFixed(2)}</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Tax (8%):</span>
                        <span class="summary-value">${tax.toFixed(2)}</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Total:</span>
                        <span class="summary-value" style="color: var(--primary);">${total.toFixed(2)}</span>
                    </div>
                </div>
            `;

            openModal('checkoutModal');
        }

        function confirmCheckout() {
            closeModal('checkoutModal');
            state.transactionType = 'checkout';
            openModal('pinModal');
        }

        function checkout() {
            if (state.cart.length === 0) {
                showToast('Cart is empty!', 'error');
                return;
            }
            
            const subtotal = state.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const total = subtotal + 10 + (subtotal * 0.08);

            // Create order
            const newOrder = {
                id: Date.now(),
                title: state.cart.map(i => i.name).slice(0, 2).join(' & ') + (state.cart.length > 2 ? ` +${state.cart.length - 2}` : ''),
                status: 'processing',
                progress: 20,
                items: state.cart.map(i => `${i.name} (${i.quantity}x)`),
                total: total.toFixed(2),
                date: new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }),
                tracking: 'MNP' + Math.random().toString().slice(2, 11),
                trackingSteps: [
                    { title: 'Order Placed', time: new Date().toLocaleString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: 'numeric', minute: 'numeric', hour12: true }), completed: true },
                    { title: 'Processing', time: 'Estimated: Within 2 hours', completed: false },
                    { title: 'Shipped', time: 'Estimated: Tomorrow', completed: false },
                    { title: 'In Transit', time: 'Estimated: 2-3 days', completed: false },
                    { title: 'Delivered', time: 'Estimated: 3-5 days', completed: false }
                ]
            };
            
            state.orders.unshift(newOrder);
            state.cart = [];
            renderCart();
            renderOrders();
            
            showToast('Order placed successfully! ', 'success');
        }

        // Orders
        function renderOrders() {
            const container = document.getElementById('ordersContainer');
            
            if (state.orders.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 60px;">No orders yet</p>';
                return;
            }
            
            container.innerHTML = state.orders.map(order => `
                <div class="order-card">
                    <div class="order-header">
                        <div>
                            <h3 style="margin-bottom: 8px;">${order.title}</h3>
                            <p style="color: var(--text-secondary); font-size: 14px;">${order.date}</p>
                        </div>
                        <div class="order-status ${order.status}">${order.status}</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${order.progress}%"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 16px;">
                        <div>
                            <div style="color: var(--text-secondary); font-size: 13px;">Tracking: ${order.tracking}</div>
                            <div style="font-weight: 600; font-size: 20px; margin-top: 4px;">${order.total}</div>
                        </div>
                        <button class="btn btn-primary btn-small" onclick="viewOrderDetails(${order.id})">View Details</button>
                    </div>
                </div>
            `).join('');
        }

        function viewOrderDetails(orderId) {
            const order = state.orders.find(o => o.id === orderId);
            if (!order) return;

            state.currentOrder = order;
            
            const detailsContent = document.getElementById('orderDetailsContent');
            detailsContent.innerHTML = `
                <div style="margin-bottom: 24px;">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 20px;">
                        <div>
                            <h2 style="margin-bottom: 8px;">${order.title}</h2>
                            <p style="color: var(--text-secondary);">Order placed on ${order.date}</p>
                        </div>
                        <div class="order-status ${order.status}">${order.status}</div>
                    </div>
                    
                    <div style="background: rgba(139, 92, 246, 0.05); padding: 20px; border-radius: 12px; margin-bottom: 24px;">
                        <h3 style="margin-bottom: 12px;">Order Details</h3>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="color: var(--text-secondary);">Order ID:</span>
                            <span style="font-weight: 600;">#${order.id}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="color: var(--text-secondary);">Tracking Number:</span>
                            <span style="font-weight: 600;">${order.tracking}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="color: var(--text-secondary);">Items:</span>
                            <span style="font-weight: 600;">${order.items.length}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding-top: 12px; border-top: 1px solid var(--border); margin-top: 12px;">
                            <span style="color: var(--text-secondary);">Total:</span>
                            <span style="font-weight: 700; font-size: 20px; color: var(--primary);">${order.total}</span>
                        </div>
                    </div>

                    <div style="background: rgba(139, 92, 246, 0.05); padding: 20px; border-radius: 12px; margin-bottom: 24px;">
                        <h3 style="margin-bottom: 16px;">Order Items</h3>
                        ${order.items.map(item => `
                            <div style="padding: 12px 0; border-bottom: 1px solid var(--border);">
                                <span style="font-weight: 600;">${item}</span>
                            </div>
                        `).join('')}
                    </div>

                    <h3 style="margin-bottom: 20px;">Tracking Timeline</h3>
                    <div class="tracking-timeline">
                        ${order.trackingSteps.map(step => `
                            <div class="tracking-step ${step.completed ? 'completed' : ''}">
                                <div class="tracking-icon">${step.completed ? '' : ''}</div>
                                <div class="tracking-info">
                                    <div class="tracking-title">${step.title}</div>
                                    <div class="tracking-time">${step.time}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            document.getElementById('ordersList').style.display = 'none';
            document.getElementById('orderDetailsView').style.display = 'block';
            document.getElementById('orderDetailsView').classList.add('active');
        }

        function closeOrderDetails() {
            document.getElementById('orderDetailsView').classList.remove('active');
            document.getElementById('orderDetailsView').style.display = 'none';
            document.getElementById('ordersList').style.display = 'block';
            state.currentOrder = null;
        }

        // Account Section
        function renderMyNFTs() {
            const container = document.getElementById('myNFTGallery');
            container.innerHTML = state.myNFTs.map(nft => `
                <div class="nft-card">
                    <div class="nft-image">
                        ${nft.icon}
                        <div class="rarity-badge rarity-${nft.rarity}">${nft.rarity}</div>
                    </div>
                    <div class="nft-info">
                        <div class="nft-name">${nft.name}</div>
                        <div class="nft-price">${nft.price ? nft.price + ' MON' : 'Not listed'}</div>
                    </div>
                </div>
            `).join('');
            
            // Also render NFT selector grid
            renderNFTSelectorGrid();
        }

        function renderMyAccessories() {
            const container = document.getElementById('myAccessories');
            if (state.myAccessories.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 60px; grid-column: 1/-1;">No accessories yet</p>';
                
                // Clear selector grid too
                const selectorGrid = document.getElementById('accessorySelectorGrid');
                if (selectorGrid) {
                    selectorGrid.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 40px; grid-column: 1/-1;">No accessories to trade</p>';
                }
                return;
            }
            container.innerHTML = state.myAccessories.map(acc => `
                <div class="nft-card">
                    <div class="nft-image">${acc.icon}</div>
                    <div class="nft-info">
                        <div class="nft-name">${acc.name}</div>
                        <div class="nft-price" style="color: var(--success);"> Owned</div>
                    </div>
                </div>
            `).join('');
            
            // Also render accessory selector grid
            renderAccessorySelectorGrid();
        }

        // Trading Panel Functions
        function toggleTradePanel(type) {
            const panel = document.getElementById(`${type}TradePanel`);
            const icon = document.getElementById(`${type}TradePanelIcon`);
            
            panel.classList.toggle('active');
            
            if (panel.classList.contains('active')) {
                icon.classList.remove('bx-chevron-down');
                icon.classList.add('bx-chevron-up');
            } else {
                icon.classList.remove('bx-chevron-up');
                icon.classList.add('bx-chevron-down');
            }
        }

        function switchTradeMode(type, mode) {
            const buttons = document.querySelectorAll(`#${type}TradePanel .trade-toggle-btn`);
            const sendSection = document.getElementById(`${type}SendSection`);
            const receiveSection = document.getElementById(`${type}ReceiveSection`);
            
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (mode === 'send') {
                sendSection.classList.add('active');
                receiveSection.classList.remove('active');
            } else {
                sendSection.classList.remove('active');
                receiveSection.classList.add('active');
            }
        }

        function renderNFTSelectorGrid() {
            const container = document.getElementById('nftSelectorGrid');
            if (!container) return;
            
            if (state.myNFTs.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 40px; grid-column: 1/-1;">No NFTs to trade</p>';
                return;
            }
            
            container.innerHTML = state.myNFTs.map(nft => `
                <div class="nft-selector-card ${state.selectedNFTsForTrade.includes(nft.id) ? 'selected' : ''}" onclick="toggleNFTSelection(${nft.id})">
                    <div class="nft-selector-image">
                        ${nft.icon}
                        ${state.selectedNFTsForTrade.includes(nft.id) ? '<div style="position: absolute; top: 8px; right: 8px; background: var(--primary); width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px;"></div>' : ''}
                    </div>
                    <div class="nft-selector-info">
                        <div class="nft-selector-name">${nft.name}</div>
                    </div>
                </div>
            `).join('');
        }

        function renderAccessorySelectorGrid() {
            const container = document.getElementById('accessorySelectorGrid');
            if (!container) return;
            
            if (state.myAccessories.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 40px; grid-column: 1/-1;">No accessories to trade</p>';
                return;
            }
            
            container.innerHTML = state.myAccessories.map(acc => `
                <div class="nft-selector-card ${state.selectedAccessoriesForTrade.includes(acc.id) ? 'selected' : ''}" onclick="toggleAccessorySelection(${acc.id})">
                    <div class="nft-selector-image">
                        ${acc.icon}
                        ${state.selectedAccessoriesForTrade.includes(acc.id) ? '<div style="position: absolute; top: 8px; right: 8px; background: var(--primary); width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px;"></div>' : ''}
                    </div>
                    <div class="nft-selector-info">
                        <div class="nft-selector-name">${acc.name}</div>
                    </div>
                </div>
            `).join('');
        }

        function toggleNFTSelection(id) {
            const index = state.selectedNFTsForTrade.indexOf(id);
            if (index > -1) {
                state.selectedNFTsForTrade.splice(index, 1);
            } else {
                state.selectedNFTsForTrade.push(id);
            }
            renderNFTSelectorGrid();
            updateNFTSelectedDisplay();
        }

        function toggleAccessorySelection(id) {
            const index = state.selectedAccessoriesForTrade.indexOf(id);
            if (index > -1) {
                state.selectedAccessoriesForTrade.splice(index, 1);
            } else {
                state.selectedAccessoriesForTrade.push(id);
            }
            renderAccessorySelectorGrid();
            updateAccessorySelectedDisplay();
        }

        function updateNFTSelectedDisplay() {
            const countEl = document.getElementById('nftSelectedCount');
            const listEl = document.getElementById('nftSelectedList');
            
            countEl.textContent = state.selectedNFTsForTrade.length;
            
            if (state.selectedNFTsForTrade.length === 0) {
                listEl.innerHTML = '<p style="color: var(--text-secondary); font-size: 13px;">No NFTs selected</p>';
                return;
            }
            
            listEl.innerHTML = state.selectedNFTsForTrade.map(id => {
                const nft = state.myNFTs.find(n => n.id === id);
                return `
                    <div class="selected-item-tag">
                        ${nft.icon} ${nft.name}
                        <button onclick="toggleNFTSelection(${id})"></button>
                    </div>
                `;
            }).join('');
        }

        function updateAccessorySelectedDisplay() {
            const countEl = document.getElementById('accessorySelectedCount');
            const listEl = document.getElementById('accessorySelectedList');
            
            countEl.textContent = state.selectedAccessoriesForTrade.length;
            
            if (state.selectedAccessoriesForTrade.length === 0) {
                listEl.innerHTML = '<p style="color: var(--text-secondary); font-size: 13px;">No accessories selected</p>';
                return;
            }
            
            listEl.innerHTML = state.selectedAccessoriesForTrade.map(id => {
                const acc = state.myAccessories.find(a => a.id === id);
                return `
                    <div class="selected-item-tag">
                        ${acc.icon} ${acc.name}
                        <button onclick="toggleAccessorySelection(${id})"></button>
                    </div>
                `;
            }).join('');
        }

        function sendNFTs() {
            const address = document.getElementById('nftRecipientAddress').value;
            const message = document.getElementById('nftSendMessage').value;
            
            if (!address) {
                showToast('Please enter recipient address', 'error');
                return;
            }
            
            if (state.selectedNFTsForTrade.length === 0) {
                showToast('Please select at least one NFT to send', 'error');
                return;
            }
            
            // Show confirmation modal with transaction details
            const selectedNFTs = state.myNFTs.filter(nft => state.selectedNFTsForTrade.includes(nft.id));
            const totalValue = selectedNFTs.reduce((sum, nft) => sum + (nft.price || 0), 0);
            
            document.getElementById('buyNFTContent').innerHTML = `
                <div style="margin-bottom: 24px;">
                    <h3 style="margin-bottom: 16px;">Confirm NFT Transfer</h3>
                    <div style="background: rgba(139, 92, 246, 0.1); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                        <p style="margin-bottom: 8px;"><strong>Sending ${selectedNFTs.length} NFT${selectedNFTs.length > 1 ? 's' : ''}:</strong></p>
                        ${selectedNFTs.map(nft => `<div style="padding: 8px 0; border-bottom: 1px solid var(--border);">${nft.icon} ${nft.name}</div>`).join('')}
                    </div>
                </div>
                <div class="transaction-summary">
                    <div class="summary-row">
                        <span class="summary-label">Recipient:</span>
                        <span class="summary-value" style="font-size: 12px;">${address.substring(0, 10)}...${address.substring(address.length - 8)}</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Estimated Value:</span>
                        <span class="summary-value">${totalValue.toFixed(2)} MON</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Gas Fee:</span>
                        <span class="summary-value">0.05 MON</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Total Cost:</span>
                        <span class="summary-value" style="color: var(--primary);">0.05 MON</span>
                    </div>
                </div>
            `;
            
            state.transactionType = 'send-nft';
            openModal('buyNFTModal');
        }

        function sendAccessories() {
            const address = document.getElementById('accessoryRecipientAddress').value;
            const message = document.getElementById('accessorySendMessage').value;
            
            if (!address) {
                showToast('Please enter recipient address', 'error');
                return;
            }
            
            if (state.selectedAccessoriesForTrade.length === 0) {
                showToast('Please select at least one accessory to send', 'error');
                return;
            }
            
            // Show confirmation modal with transaction details
            const selectedAccessories = state.myAccessories.filter(acc => state.selectedAccessoriesForTrade.includes(acc.id));
            const totalValue = selectedAccessories.reduce((sum, acc) => sum + (acc.price || 0), 0);
            
            document.getElementById('buyNFTContent').innerHTML = `
                <div style="margin-bottom: 24px;">
                    <h3 style="margin-bottom: 16px;">Confirm Accessory Transfer</h3>
                    <div style="background: rgba(139, 92, 246, 0.1); padding: 16px; border-radius: 12px; margin-bottom: 16px;">
                        <p style="margin-bottom: 8px;"><strong>Sending ${selectedAccessories.length} Accessor${selectedAccessories.length > 1 ? 'ies' : 'y'}:</strong></p>
                        ${selectedAccessories.map(acc => `<div style="padding: 8px 0; border-bottom: 1px solid var(--border);">${acc.icon} ${acc.name}</div>`).join('')}
                    </div>
                </div>
                <div class="transaction-summary">
                    <div class="summary-row">
                        <span class="summary-label">Recipient:</span>
                        <span class="summary-value" style="font-size: 12px;">${address.substring(0, 10)}...${address.substring(address.length - 8)}</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Estimated Value:</span>
                        <span class="summary-value">${totalValue.toFixed(2)} MON</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Gas Fee:</span>
                        <span class="summary-value">0.03 MON</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Total Cost:</span>
                        <span class="summary-value" style="color: var(--primary);">0.03 MON</span>
                    </div>
                </div>
            `;
            
            state.transactionType = 'send-accessory';
            openModal('buyNFTModal');
        }

        function completeTradeSend() {
            if (state.transactionType === 'send-nft') {
                const count = state.selectedNFTsForTrade.length;
                
                // Remove sent NFTs from my collection
                state.myNFTs = state.myNFTs.filter(nft => !state.selectedNFTsForTrade.includes(nft.id));
                
                // Clear selection
                state.selectedNFTsForTrade = [];
                
                // Update displays
                renderMyNFTs();
                updateNFTSelectedDisplay();
                
                // Clear form
                document.getElementById('nftRecipientAddress').value = '';
                document.getElementById('nftSendMessage').value = '';
                
                showToast(`Successfully sent ${count} NFT${count > 1 ? 's' : ''}! `, 'success');
            } else if (state.transactionType === 'send-accessory') {
                const count = state.selectedAccessoriesForTrade.length;
                
                // Remove sent accessories from my collection
                state.myAccessories = state.myAccessories.filter(acc => !state.selectedAccessoriesForTrade.includes(acc.id));
                
                // Clear selection
                state.selectedAccessoriesForTrade = [];
                
                // Update displays
                renderMyAccessories();
                updateAccessorySelectedDisplay();
                
                // Clear form
                document.getElementById('accessoryRecipientAddress').value = '';
                document.getElementById('accessorySendMessage').value = '';
                
                showToast(`Successfully sent ${count} accessor${count > 1 ? 'ies' : 'y'}! `, 'success');
            }
        }

        function renderTokenBalances() {
            const container = document.getElementById('tokenBalances');
            container.innerHTML = state.tokens.map(token => `
                <div class="card" style="margin-bottom: 16px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 20px;">
                            <div style="font-size: 48px;">${token.icon}</div>
                            <div>
                                <div style="font-size: 20px; font-weight: 700;">${token.name}</div>
                                <div style="color: var(--text-secondary);">${token.symbol}</div>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 28px; font-weight: bold;">${token.balance}</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function renderTransactionHistory() {
            const container = document.getElementById('transactionHistory');
            container.innerHTML = state.transactions.map(tx => `
                <div class="card" style="margin-bottom: 16px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-size: 18px; font-weight: 600; text-transform: capitalize;">${tx.type}</div>
                            <div style="color: var(--text-secondary); font-size: 14px;">${tx.date}</div>
                        </div>
                        <div style="font-size: 20px; font-weight: bold;">${tx.amount}</div>
                    </div>
                </div>
            `).join('');
        }

        function setupTransferWallets() {
            document.querySelectorAll('.transfer-wallet').forEach(wallet => {
                wallet.addEventListener('click', () => {
                    document.querySelectorAll('.transfer-wallet').forEach(w => w.classList.remove('active'));
                    wallet.classList.add('active');
                });
            });
        }

        // Wallet Functions
        function sendTransaction() {
            openModal('pinModal');
            state.transactionType = 'send';
        }

        function swapTokens() {
            openModal('pinModal');
            state.transactionType = 'swap';
        }

        function importFunds() {
            openModal('pinModal');
            state.transactionType = 'import';
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showToast('Copied to clipboard! ', 'success');
            });
        }

        // Profile
        function saveProfile() {
            showToast('Profile updated successfully! ', 'success');
        }

        function toggleSetting(el) {
            el.classList.toggle('active');
            showToast('Setting updated! ', 'success');
        }

        function copyText(btn) {
            const card = btn.closest('.policy-card');
            const text = card.querySelector('p').textContent;
            copyToClipboard(text);
        }

        // Modal Functions
        function openModal(id) {
            document.getElementById(id).classList.add('active');
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        function closePanel(id) {
            document.getElementById(id).classList.remove('active');
        }

        // Toast Notification
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: '',
                error: ''
            };
            
            toast.innerHTML = `
                <div class="toast-icon">${icons[type] || icons.success}</div>
                <div>${message}</div>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideInRight 0.4s ease reverse';
                setTimeout(() => toast.remove(), 400);
            }, 3500);
        }

        // Social Links
        function openSocial(platform) {
            const links = {
                twitter: 'https://twitter.com',
                discord: 'https://discord.com',
                tiktok: 'https://tiktok.com',
                telegram: 'https://telegram.org'
            };
            window.open(links[platform], '_blank');
        }

        // Buy NFT
        function buyNFT(id) {
            const allNFTs = [...state.marketNFTs, ...state.modifiedNFTs];
            const nft = allNFTs.find(n => n.id === id);
            
            if (!nft) {
                showToast('NFT not found', 'error');
                return;
            }

            document.getElementById('buyNFTContent').innerHTML = `
                <div style="text-align: center; margin-bottom: 24px;">
                    <div style="font-size: 100px; margin-bottom: 20px;">${nft.icon}</div>
                    <h3 style="margin-bottom: 12px;">${nft.name}</h3>
                    <div class="rarity-badge rarity-${nft.rarity}">${nft.rarity}</div>
                </div>
                <div class="transaction-summary">
                    <div class="summary-row">
                        <span class="summary-label">Price:</span>
                        <span class="summary-value">${nft.price} MON</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Gas Fee:</span>
                        <span class="summary-value">0.05 MON</span>
                    </div>
                    <div class="summary-row">
                        <span class="summary-label">Total:</span>
                        <span class="summary-value" style="color: var(--primary);">${(nft.price + 0.05).toFixed(2)} MON</span>
                    </div>
                </div>
            `;
            
            state.currentPurchase = {type: 'nft', item: nft};
            openModal('buyNFTModal');
        }

        function openPinModal() {
            closeModal('buyNFTModal');
            openModal('pinModal');
        }

        function confirmPin() {
            const pinInputs = document.querySelectorAll('.pin-input');
            let pin = '';
            pinInputs.forEach(input => {
                pin += input.value;
            });

            if (pin.length !== 4) {
                showToast('Please enter complete PIN', 'error');
                return;
            }

            closeModal('pinModal');
            openModal('twofaModal');
        }

        function confirmTwoFA() {
            const code = document.getElementById('twoFAInput').value;
            
            if (code.length !== 6) {
                showToast('Please enter 6-digit code', 'error');
                return;
            }

            closeModal('twofaModal');
            
            if (state.transactionType === 'send') {
                showToast('Tokens sent successfully! ', 'success');
                state.transactionType = null;
                openModal('confirmationModal');
            } else if (state.transactionType === 'swap') {
                showToast('Tokens swapped successfully! ', 'success');
                state.transactionType = null;
                openModal('confirmationModal');
            } else if (state.transactionType === 'import') {
                showToast('Funds imported successfully! ', 'success');
                state.transactionType = null;
                openModal('confirmationModal');
            } else if (state.transactionType === 'checkout') {
                checkout();
                state.transactionType = null;
                openModal('confirmationModal');
            } else if (state.transactionType === 'send-nft' || state.transactionType === 'send-accessory') {
                completeTradeSend();
                state.transactionType = null;
                openModal('confirmationModal');
            } else if (state.currentPurchase) {
                if (state.currentPurchase.type === 'nft') {
                    const purchasedNFT = {...state.currentPurchase.item};
                    state.myNFTs.push(purchasedNFT);
                    
                    state.marketNFTs = state.marketNFTs.filter(n => n.id !== purchasedNFT.id);
                    state.modifiedNFTs = state.modifiedNFTs.filter(n => n.id !== purchasedNFT.id);
                    
                    renderMarket();
                    renderMyNFTs();
                    
                    setTimeout(() => {
                        showToast('NFT added to your collection! ', 'success');
                    }, 1500);
                } else if (state.currentPurchase.type === 'accessory') {
                    const acc = state.currentPurchase.item;
                    state.myAccessories.push({...acc});
                    renderMyAccessories();
                    
                    setTimeout(() => {
                        showToast(`${acc.name} added to your accessories! `, 'success');
                    }, 1500);
                }
                
                state.currentPurchase = null;
                openModal('confirmationModal');
            }
            
            document.querySelectorAll('.pin-input').forEach(input => input.value = '');
            document.getElementById('twoFAInput').value = '';
        }

        function setupPinInputs() {
            const pinInputs = document.querySelectorAll('.pin-input');
            pinInputs.forEach((input, index) => {
                input.addEventListener('input', (e) => {
                    if (e.target.value.length === 1 && index < pinInputs.length - 1) {
                        pinInputs[index + 1].focus();
                    }
                });
                
                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Backspace' && !e.target.value && index > 0) {
                        pinInputs[index - 1].focus();
                    }
                });
            });
        }

        function viewNFTDetails(id) {
            const allNFTs = [...state.marketNFTs, ...state.modifiedNFTs];
            const nft = allNFTs.find(n => n.id === id);
            
            if (!nft) {
                showToast('NFT not found', 'error');
                return;
            }

            document.getElementById('detailIcon').textContent = nft.icon;
            document.getElementById('detailName').textContent = nft.name;
            document.getElementById('detailCollection').textContent = nft.collection;
            document.getElementById('detailRarityBadge').innerHTML = `<span class="rarity-badge rarity-${nft.rarity}">${nft.rarity}</span>`;
            document.getElementById('detailPrice').textContent = `${nft.price} MON`;
            document.getElementById('detailOwner').textContent = '0x742d...f0bEb';
            
            state.currentNFTView = id;
            openModal('nftDetailModal');
        }

        function buyFromDetails() {
            closeModal('nftDetailModal');
            if (state.currentNFTView) {
                buyNFT(state.currentNFTView);
            }
        }

        // Close modals on outside click
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    closeModal(overlay.id);
                }
            });
        });

        // Live Chat Functions
        function openLiveChat() {
            document.getElementById('liveChatPanel').classList.add('active');
            document.getElementById('chatInput').focus();
        }

        function closeLiveChat() {
            document.getElementById('liveChatPanel').classList.remove('active');
        }

        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            const messagesContainer = document.getElementById('chatMessages');
            const userMsg = document.createElement('div');
            userMsg.className = 'chat-message user';
            userMsg.innerHTML = `
                <div class="chat-bubble">${message}</div>
            `;
            messagesContainer.appendChild(userMsg);
            
            // Clear input
            input.value = '';
            
            // Scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Show typing indicator
            document.getElementById('chatTyping').style.display = 'block';
            
            // Simulate bot response
            setTimeout(() => {
                document.getElementById('chatTyping').style.display = 'none';
                
                const botMsg = document.createElement('div');
                botMsg.className = 'chat-message bot';
                botMsg.innerHTML = `
                    <div class="chat-avatar"></div>
                    <div class="chat-bubble">
                        Thank you for your message! A support agent will respond shortly. In the meantime, you can check our <a href="#" style="color: var(--primary);">Help Center</a> for instant answers.
                    </div>
                `;
                messagesContainer.appendChild(botMsg);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 1500);
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendChatMessage();
            }
        }

        // Update support button to open live chat
        document.addEventListener('DOMContentLoaded', function() {
            const supportContent = document.querySelector('#supportPanel .overlay-content');
            if (supportContent) {
                supportContent.querySelector('.btn-primary').onclick = function() {
                    closePanel('supportPanel');
                    openLiveChat();
                };
            }
        });

        // Initialize on load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initApp);
        } else {
            initApp();
        }
    </script>
</body>
</html>
